<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="Geek Spirit">
<meta property="og:type" content="website">
<meta property="og:title" content="qicainiao&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="qicainiao&#39;s Blog">
<meta property="og:description" content="Geek Spirit">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="qicainiao&#39;s Blog">
<meta name="twitter:description" content="Geek Spirit">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>qicainiao's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">qicainiao's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Geek Spirit</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/30/reactæ€§èƒ½ä¼˜åŒ–/æ‰‹æŠŠæ‰‹æµ‹è¯•reactæ€§èƒ½/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qicainiao">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qicainiao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/30/reactæ€§èƒ½ä¼˜åŒ–/æ‰‹æŠŠæ‰‹æµ‹è¯•reactæ€§èƒ½/" itemprop="url">æ‰‹æŠŠæ‰‹æµ‹è¯•reactæ€§èƒ½</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-08-30T17:19:27+08:00">
                2019-08-30
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/reactæ€§èƒ½ä¼˜åŒ–/" itemprop="url" rel="index">
                    <span itemprop="name">reactæ€§èƒ½ä¼˜åŒ–</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>åœ¨æœ€è¿‘çš„å·¥ä½œä¸­æˆ‘ä»¬å‘ç°å¼€å‘ä¸€ä¸ªå·²ç»æŒç»­å¼€å‘äº†ä¸€å¹´çš„Reactåº”ç”¨åœ¨IE11æµè§ˆå™¨å’Œä¸€ä¸ªè€æ—§çš„å®‰å“è®¾å¤‡ä¸Šå·¥ä½œä¸æ˜¯ç‰¹åˆ«æµç•…ï¼Œè¿™å¼•èµ·äº†æˆ‘ä»¬çš„æ³¨æ„ï¼Œå†³å®šæŠ½å‡ºä¸€äº›ç²¾åŠ›å¯¹ä»£ç åšä¸€äº›ä¼˜åŒ–ã€‚è™½ç„¶æˆ‘ä»¬åœ¨æ—¥å¸¸å¼€å‘ä¸­å·²ç»æœ‰æ„è¯†çš„å»å†™é«˜è´¨é‡ã€é«˜æ•ˆç‡çš„ä»£ç ï¼Œä½†æ˜¯ç”±äºå¼€å‘äººå‘˜çš„è®¡ç®—æœºæ€§èƒ½éƒ½å¾ˆå¥½å¹¶ä¸”ç»å¸¸è°ƒè¯•ä½¿ç”¨çš„chromeæµè§ˆå™¨æœ‰ä¸€ä¸ªå¼ºå¤§çš„V8å¼•æ“æ‰€ä»¥æ€§èƒ½é—®é¢˜è¿˜æ˜¯ç»å¸¸ä¼šè¢«å¿½ç•¥ã€‚</p>
<p>æˆ‘æ˜¯å¦‚ä½•ç”¨React Profileå‘ç°é—®é¢˜ï¼Œå¹¶åˆ†æè§£å†³é—®é¢˜çš„ã€‚</p>
<h2 id="åˆ†æå·¥å…·"><a href="#åˆ†æå·¥å…·" class="headerlink" title="åˆ†æå·¥å…·"></a>åˆ†æå·¥å…·</h2><p>æ€§èƒ½é—®é¢˜é€šå¸¸æ˜¯åœ¨æ‰‹åŠ¨æµ‹è¯•æˆ–è°ƒè¯•æ—¶ç›´è§‚æ„Ÿå—åˆ°çš„ï¼Œä¾‹å¦‚åšæŸäº›æ“ä½œæ—¶åº”ç”¨å‡ºç°å¡é¡¿æˆ–æ˜¯ç§»åŠ¨è®¾å¤‡å‘çƒ­çš„æƒ…å†µã€‚ä½†æ˜¯åœ¨è¿™ç§æƒ…å†µä¸‹ä¸å¤ªå®¹æ‰¾åˆ°é—®é¢˜åˆ°åº•å‡ºåœ¨å“ªäº›ç»„ä»¶ä¸­ï¼Œå¾ˆå¤šæ—¶å€™æ–°æ·»åŠ çš„ä»£ç å¹¶ä¸ä¸€å®šæ˜¯é—®é¢˜çš„åŸå› æœ‰å¯èƒ½åªæ˜¯ä¸ªè¯±å› ã€‚è¿™æ—¶åˆ†æå·¥å…·å°±éå¸¸æœ‰ç”¨äº†ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®šä½é—®é¢˜ç‚¹ã€‚åœ¨è¿™ç¯‡æ–‡ç« æˆ‘ç”¨React+Reduxçš„Todosä¾‹å­ä½œä¸ºæ¼”ç¤ºä»£ç ã€‚</p>
<h3 id="React-DevTools"><a href="#React-DevTools" class="headerlink" title="React DevTools"></a>React DevTools</h3><p>è¿™åº”è¯¥æ˜¯æ¯ä¸ªReactå¼€å‘è€…å¿…å¤‡å·¥å…·</p>
<h3 id="Highlight-Updates"><a href="#Highlight-Updates" class="headerlink" title="Highlight Updates"></a>Highlight Updates</h3><p>è¿™æ˜¯DevToolsé‡Œæä¾›çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œåœ¨æˆ‘ä»¬æ“ä½œReact Appæ—¶å¯ä»¥é«˜äº®é‡æ–°æ¸²æŸ“çš„ç»„ä»¶ã€‚</p>
<p>æ‰“å¼€é«˜äº®åŠŸèƒ½</p>
<p><img src="/images/react/1.png" alt></p>
<p>ä½¿ç”¨<br>æ‰“å¼€ä¹‹åå½“æ“ä½œAppæ—¶é‡æ–°æ¸²æŸ“çš„ç»„ä»¶ä¼šæœ‰ä¸€ä¸ªé«˜äº®çš„è¾¹æ¡†ï¼Œè¾¹æ¡†ä¸ºè“è‰²æ—¶è¯´æ˜æ¸²æŸ“æ—¶é—´çŸ­ï¼Œé»„è‰²è¯´æ˜æ—¶é—´æœ‰ç‚¹é•¿ï¼Œå¦‚æœæ—¶é—´å¾ˆé•¿ä¼šæ˜¯çº¢è‰²å°±è¦æ³¨æ„äº†ã€‚è¿™ä¸ªå·¥å…·ä¼šç»™æˆ‘ä»¬ä¸€ä¸ªç›´è§‚çš„æ˜¾ç¤ºå“ªäº›ç»„ä»¶æ›´æ–°äº†ã€‚</p>
<p><img src="/images/react/2.gif" alt></p>
<h3 id="React-Profiler"><a href="#React-Profiler" class="headerlink" title="React Profiler"></a>React Profiler</h3><p>è¿™ä¸ªå·¥å…·åŒ…å«åœ¨React DevToolsä¸­ï¼Œé€‚ç”¨äºreact 16.5åŠä¹‹åç‰ˆæœ¬ã€‚å¦‚æœä½ çš„é¡¹ç›®ç‰ˆæœ¬åˆé€‚ï¼Œä¼šåœ¨DevToolsé‡Œçœ‹åˆ°Profileré¡µã€‚</p>
<p><img src="/images/react/3.png" alt></p>
<h2 id="åˆ†æé—®é¢˜"><a href="#åˆ†æé—®é¢˜" class="headerlink" title="åˆ†æé—®é¢˜"></a>åˆ†æé—®é¢˜</h2><p>ä½¿ç”¨å·¥å…·<br>ç‚¹Profilerå³ä¸Šè§’çš„åœ†å½¢æŒ‰é’®å¼€å§‹è®°å½•åˆ†ææ•°æ®ï¼Œç„¶ååœ¨todosä¸Šæ·»åŠ 3ä¸ªæ–°çš„todoé¡¹ï¼Œå®Œæˆæ“ä½œä¹‹åå†ç‚¹åœ†å½¢æŒ‰é’®ç»“æŸå½•åˆ¶ã€‚</p>
<p>ä»Appä¸Šå¯ä»¥çœ‹åˆ°ï¼Œæ¯å½“æ·»åŠ æ–°çš„todoé¡¹æ—¶ï¼Œæ•´ä¸ªtodoåˆ—è¡¨å’Œæ¯ä¸€ä¸ªtodoé¡¹éƒ½é‡æ–°æ¸²æŸ“äº†ã€‚ </p>
<p><img src="/images/react/4.gif" alt></p>
<p>ç„¶åçœ‹çœ‹Profilerä¸­çš„æ•°æ®ã€‚</p>
<p><img src="/images/react/5.png" alt></p>
<p>Reactæ¸²æŸ“ç»„ä»¶ä¸»è¦åˆ†ä¸¤ä¸ªé˜¶æ®µï¼šæ¸²æŸ“ï¼ˆRenderï¼‰å’Œæäº¤ï¼ˆcommitï¼‰ã€‚æ¸²æŸ“é˜¶æ®µreactæ‰§è¡Œç»„ä»¶ä¸­çš„renderæ–¹æ³•å¾—åˆ°æ¸²æŸ“ç»“æœä¹Ÿå°±æ˜¯è™šæ‹ŸDOMï¼Œç„¶åå’Œä¸Šä¸€æ¬¡æ¸²æŸ“çš„ç»“æœæ¯”è¾ƒæ‰¾å‡ºå·®å¼‚ã€‚æäº¤é˜¶æ®µï¼Œreactä¼šæ·»åŠ ã€æ›´æ–°æˆ–åˆ é™¤çœŸå®DOMï¼ŒæŠŠè™šæ‹ŸDOMä¸­çš„å†…å®¹æ¸²æŸ“åˆ°é¡µé¢ä¸­ã€‚</p>
<p><img src="/images/react/6.png" alt></p>
<p>å³ä¸Šè§’çš„1/3è¡¨ç¤ºåœ¨å½•åˆ¶è¿‡ç¨‹ä¸­ä¸€å…±æœ‰3æ¬¡æäº¤ï¼Œå›¾ä¸­çš„æ¯ä¸€ä¸ªå°æ¡ä»£è¡¨ä¸€æ¬¡æäº¤ï¼Œé»‘è‰²çš„æ˜¯å½“å‰é€‰ä¸­çš„æäº¤ï¼Œç‚¹å‡»ä¸åŒçš„æ¡å¯ä»¥é€‰æ‹©ä¸åŒçš„æäº¤ã€‚å°æ¡çš„é«˜åº¦å’Œé¢œè‰²ååº”äº†æäº¤æ‰§è¡Œçš„æ—¶é—´ï¼Œé»„è‰²é«˜çš„æ¡æ¯”è“è‰²æ¡ç”¨çš„æ—¶é—´é•¿ã€‚</p>
<p><img src="/images/react/7.png" alt></p>
<p>è¿™éƒ¨åˆ†æ˜¯ç«ç„°å›¾ğŸ”¥ï¼Œæ¯ä¸€ä¸ªå°å—å¯¹åº”ä¸€ä¸ªç»„ä»¶ï¼Œå—çš„é•¿åº¦ã€é¢œè‰²å’Œç»„ä»¶æ¸²æŸ“æ‰€ç”¨æ—¶é—´æœ‰å…³ï¼Œé»„è‰²é•¿çš„å—è¯´æ˜æ¶ˆè€—çš„æ—¶é—´æ›´é•¿ã€‚ç°è‰²è¯´æ˜è¿™ä¸ªç»„ä»¶åœ¨è¿™æ¬¡æäº¤ä¸­æ²¡æœ‰é‡æ–°æ¸²æŸ“ã€‚è¿™é‡Œæ˜¾ç¤ºçš„ç»„ä»¶æ¸²æŸ“æ—¶é—´æ˜¯å®ƒè‡ªèº«æ¸²æŸ“çš„æ—¶é—´å’Œå®ƒæ‰€æœ‰å­ç»„ä»¶æ¸²æŸ“æ—¶é—´çš„ç»¼åˆã€‚</p>
<p><img src="/images/react/9.gif" alt></p>
<p>æ‰¾åˆ°èŠ±è´¹æ—¶é—´é•¿çš„ç»„ä»¶</p>
<p><img src="/images/react/10.png" alt></p>
<p>ä¸ºäº†è®©é—®é¢˜æ›´æ˜æ˜¾æˆ‘åŠ äº†30ä¸ªtodoåˆ°åˆ—è¡¨ä¸­ï¼Œä»å›¾ä¸­å¾ˆå®¹æ˜“å‘ç°å¤§éƒ¨åˆ†æ—¶é—´éƒ½èŠ±åœ¨TodoListè¿™ä¸ªç»„ä»¶ä¸Šã€‚è¿™ä¸ªå›¾é‡Œæœ‰ä¸€ä¸ªå®¹æ˜“äº§ç”Ÿå›°æƒ‘çš„åœ°æ–¹å°±æ˜¯Total Rendersï¼Œè¿™ä¸ªæ•°å­—ä»£è¡¨çš„æ˜¯è¿™ä¸ªç»„ä»¶åœ¨æ•´ä¸ªAppç”Ÿå‘½å‘¨æœŸé‡Œè¢«æ¸²æŸ“çš„æ¬¡æ•°ï¼Œè€Œä¸æ˜¯åœ¨è¿™æ¬¡commitä¸­è¢«æ¸²æŸ“çš„æ¬¡æ•°ã€‚</p>
<p>å’Œä¹‹å‰åªæœ‰3ä¸ªtodoæ—¶ç›¸æ¯”è¾ƒï¼ŒTodoListè¿™ä¸ªç»„ä»¶çš„æ¸²æŸ“æ—¶é—´éšç€todoæ•°é‡çš„å¢åŠ è€Œå¢åŠ ï¼Œå› ä¸ºæ¯æ¬¡æ¸²æŸ“åˆ—è¡¨æ—¶æ¯ä¸ªtodoéƒ½é‡æ–°æ¸²æŸ“äº†ã€‚è€Œè¿™äº›æ¸²æŸ“å¹¶ä¸æ˜¯å¿…è¦ï¼Œå› ä¸ºæ¯ä¸ªæ–°todoéƒ½æ˜¯æ·»åŠ åˆ°åˆ—è¡¨æœ«å°¾ï¼Œä¹‹å‰çš„todoä½ç½®å’Œå†…å®¹éƒ½æ²¡æœ‰å˜åŒ–åº”è¯¥å¯ä»¥ä¸å†æ¸²æŸ“ã€‚</p>
<p><img src="/images/react/11.gif" alt></p>
<p>ç‚¹å‡»ç¬¬ä¸€ä¸ªtodoç»„ä»¶ï¼Œç„¶ååˆ‡æ¢ä¸åŒçš„commitå‘ç°todoçš„propsä¸€ç›´æ²¡æœ‰å˜åŒ–ï¼Œè¿™ä¹Ÿè¯æ˜äº†æˆ‘ä»¬ä¹‹å‰çš„æƒ³æ³•æ˜¯æ­£ç¡®çš„ã€‚</p>
<h2 id="æ”¹è¿›æ–¹æ³•"><a href="#æ”¹è¿›æ–¹æ³•" class="headerlink" title="æ”¹è¿›æ–¹æ³•"></a>æ”¹è¿›æ–¹æ³•</h2><p>ä½¿ç”¨React.PureComponentæˆ–React.memo()é¿å…ä¸å¿…è¦çš„ç»„ä»¶é‡æ¸²æŸ“<br>React.PureComponentå’ŒReact.Componentç±»ä¼¼ï¼Œä½†æ˜¯React.PureComponentåœ¨shouldComponentUpdate()ä¸­å¯¹propså’Œstateåšäº†ä¸€ä¸ªæµ…æ¯”è¾ƒï¼Œå¦‚æœpropså’Œstateæ²¡æœ‰å˜åŒ–åˆ™ä¸æ¸²æŸ“ç»„ä»¶ã€‚</p>
<p>React.memo()æ˜¯16.8ç‰ˆæœ¬åŠ å…¥çš„æ–°åŠŸèƒ½ï¼Œä¸ºä½¿ç”¨å‡½æ•°å®šä¹‰çš„ç»„ä»¶æä¾›äº†ç±»ä¼¼PureComponentçš„åŠŸèƒ½ã€‚</p>
<p>æœ¬ä¾‹ä¸­çš„Todoç»„ä»¶ä½¿ç”¨å‡½æ•°æ–¹å¼å®šä¹‰çš„ï¼Œæ‰€ä»¥æŠŠæœ€åä¸€è¡Œä½¿ç”¨React.memo()é‡å†™ä¸º export default React.memo(Todo)</p>
<p>é‡å†™åçš„ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;</span><br><span class="line">import PropTypes from &apos;prop-types&apos;</span><br><span class="line"></span><br><span class="line">const Todo = (&#123; onClick, completed, text &#125;) =&gt; (</span><br><span class="line">  &lt;li</span><br><span class="line">    onClick=&#123;onClick&#125;</span><br><span class="line">    style=&#123;&#123;</span><br><span class="line">      textDecoration: completed ? &apos;line-through&apos; : &apos;none&apos;</span><br><span class="line">    &#125;&#125;</span><br><span class="line">  &gt;</span><br><span class="line">    &#123;text&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">Todo.propTypes = &#123;</span><br><span class="line">  onClick: PropTypes.func.isRequired,</span><br><span class="line">  completed: PropTypes.bool.isRequired,</span><br><span class="line">  text: PropTypes.string.isRequired</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default React.memo(Todo);</span><br></pre></td></tr></table></figure>

<p>æ”¹è¿‡ä¹‹åé‡æ–°å½•åˆ¶åˆ†ææ•°æ®å†æ¥çœ‹çœ‹ï¼Œ</p>
<p><img src="/images/react/11.png" alt></p>
<p>å—¯ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå˜åŒ–ï¼Œå†æ¬¡çœ‹todoç»„ä»¶çš„åˆ†ææ•°æ®ã€‚<br><img src="/images/react/12.gif" alt></p>
<p>é€šè¿‡æ¯”è¾ƒä¸¤æ¬¡commitï¼Œtodoçš„propsçœ‹ä¸Šå»æ²¡æœ‰å˜åŒ–ï¼Œè€Œä¸”todoä¹Ÿæ²¡æœ‰stateã€‚ä¸è¿‡è¿›ä¸€æ­¥è§‚å¯Ÿï¼Œpropsä¸­completed, id, textéƒ½æ˜¯åŸå§‹ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šä»–ä»¬æ˜¯æ²¡å˜çš„ã€‚onClickä¸åŒï¼Œè¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ˜¯å¦å˜åŒ–åŒå®šä¹‰çš„æ–¹å¼æœ‰å…³ã€‚</p>
<p>é€šè¿‡æŸ¥çœ‹ä»£ç ï¼Œå‘ç°onClickæ˜¯ä¸€ä¸ªinlineçš„ç®­å¤´å‡½æ•°ï¼Œé—®é¢˜æ˜¯åº”è¯¥å‡ºåœ¨è¿™é‡Œã€‚</p>
<p>TodoList.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const TodoList = (&#123; todos, toggleTodo &#125;) =&gt; (</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &#123;todos.map(todo =&gt;</span><br><span class="line">      &lt;Todo</span><br><span class="line">        key=&#123;todo.id&#125;</span><br><span class="line">        &#123;...todo&#125;</span><br><span class="line">        onClick=&#123;() =&gt; toggleTodo(todo.id)&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">    )&#125;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>ä¸è¦ä½¿ç”¨inlineå®šä¹‰çš„æ–¹æ³•æˆ–Objectä¸ºpropsä¼ å€¼<br>ä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹ï¼š</p>
<p>TodoList.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const TodoList = (&#123; todos, toggleTodo &#125;) =&gt; (</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &#123;todos.map(todo =&gt;</span><br><span class="line">      &lt;Todo</span><br><span class="line">        key=&#123;todo.id&#125;</span><br><span class="line">        &#123;...todo&#125;</span><br><span class="line">        onClick=&#123;toggleTodo&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">    )&#125;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>æŠŠåŸå…ˆçš„inlineæ–¹æ³•å»æ‰ï¼Œæ”¹ä¸ºç›´æ¥æŠŠtoggleTodoä¼ ç»™Todoã€‚</p>
<p>Todo.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const Todo = (&#123; onClick, id, completed, text &#125;) =&gt; &#123;</span><br><span class="line">  function clickHandler() &#123;</span><br><span class="line">    onClick(id)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;li</span><br><span class="line">      onClick=&#123;clickHandler&#125;</span><br><span class="line">      style=&#123;&#123;</span><br><span class="line">        textDecoration: completed ? &apos;line-through&apos; : &apos;none&apos;</span><br><span class="line">      &#125;&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &#123;text&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨Todo.jsä¸­å®šä¹‰äº†ä¸€ä¸ªclickHandleræ–¹æ³•ï¼Œè¿™æ ·todoæ–¹æ³•æ¯æ¬¡é‡æ–°è¿è¡Œæ—¶clickHandleréƒ½ä¸ä¼šå˜ã€‚</p>
<p><img src="/images/react/13.png" alt></p>
<p>æ–°çš„åˆ†ææ•°æ®ä¸­å¯ä»¥çœ‹åˆ°å‰é¢çš„todoç»„ä»¶éƒ½æ˜¯ç°è‰²è¯´æ˜æ²¡æœ‰é‡æ–°æ¸²æŸ“ï¼Œåªæœ‰æœ€åä¸€ä¸ªæ–°åŠ çš„todoè¢«æ¸²æŸ“äº†ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/30/reactæ€§èƒ½ä¼˜åŒ–/reactæ€§èƒ½ä¼˜åŒ–1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qicainiao">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qicainiao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/30/reactæ€§èƒ½ä¼˜åŒ–/reactæ€§èƒ½ä¼˜åŒ–1/" itemprop="url">reactæ€§èƒ½ä¼˜åŒ–ä¸€</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-08-30T17:05:59+08:00">
                2019-08-30
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/reactæ€§èƒ½ä¼˜åŒ–/" itemprop="url" rel="index">
                    <span itemprop="name">reactæ€§èƒ½ä¼˜åŒ–</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>
<h2 id="propså°½é‡åªä¼ éœ€è¦çš„æ•°æ®ï¼Œé¿å…å¤šä½™çš„æ›´æ–°"><a href="#propså°½é‡åªä¼ éœ€è¦çš„æ•°æ®ï¼Œé¿å…å¤šä½™çš„æ›´æ–°" class="headerlink" title="propså°½é‡åªä¼ éœ€è¦çš„æ•°æ®ï¼Œé¿å…å¤šä½™çš„æ›´æ–°"></a>propså°½é‡åªä¼ éœ€è¦çš„æ•°æ®ï¼Œé¿å…å¤šä½™çš„æ›´æ–°</h2><h2 id="ç»„ä»¶å°½é‡è§£è€¦ï¼Œæ¯”å¦‚ä¸€ä¸ªinput-listç»„å»ºï¼Œå¯ä»¥å°†liståˆ†æˆä¸€ä¸ªPureComponentï¼Œåªåœ¨listæ•°æ®å˜åŒ–æ˜¯æ›´æ–°"><a href="#ç»„ä»¶å°½é‡è§£è€¦ï¼Œæ¯”å¦‚ä¸€ä¸ªinput-listç»„å»ºï¼Œå¯ä»¥å°†liståˆ†æˆä¸€ä¸ªPureComponentï¼Œåªåœ¨listæ•°æ®å˜åŒ–æ˜¯æ›´æ–°" class="headerlink" title="ç»„ä»¶å°½é‡è§£è€¦ï¼Œæ¯”å¦‚ä¸€ä¸ªinput+listç»„å»ºï¼Œå¯ä»¥å°†liståˆ†æˆä¸€ä¸ªPureComponentï¼Œåªåœ¨listæ•°æ®å˜åŒ–æ˜¯æ›´æ–°"></a>ç»„ä»¶å°½é‡è§£è€¦ï¼Œæ¯”å¦‚ä¸€ä¸ªinput+listç»„å»ºï¼Œå¯ä»¥å°†liståˆ†æˆä¸€ä¸ªPureComponentï¼Œåªåœ¨listæ•°æ®å˜åŒ–æ˜¯æ›´æ–°</h2><h2 id="å¦‚æœç»„ä»¶æœ‰å¤ç”¨ï¼Œkeyå€¼éå¸¸é‡è¦ã€‚å› æ­¤keyçš„ä¼˜åŒ–ï¼Œå¦‚æœæœ‰å”¯ä¸€idï¼Œå°½é‡ä¸ä½¿ç”¨å¾ªç¯å¾—åˆ°çš„index"><a href="#å¦‚æœç»„ä»¶æœ‰å¤ç”¨ï¼Œkeyå€¼éå¸¸é‡è¦ã€‚å› æ­¤keyçš„ä¼˜åŒ–ï¼Œå¦‚æœæœ‰å”¯ä¸€idï¼Œå°½é‡ä¸ä½¿ç”¨å¾ªç¯å¾—åˆ°çš„index" class="headerlink" title="å¦‚æœç»„ä»¶æœ‰å¤ç”¨ï¼Œkeyå€¼éå¸¸é‡è¦ã€‚å› æ­¤keyçš„ä¼˜åŒ–ï¼Œå¦‚æœæœ‰å”¯ä¸€idï¼Œå°½é‡ä¸ä½¿ç”¨å¾ªç¯å¾—åˆ°çš„index"></a>å¦‚æœç»„ä»¶æœ‰å¤ç”¨ï¼Œkeyå€¼éå¸¸é‡è¦ã€‚å› æ­¤keyçš„ä¼˜åŒ–ï¼Œå¦‚æœæœ‰å”¯ä¸€idï¼Œå°½é‡ä¸ä½¿ç”¨å¾ªç¯å¾—åˆ°çš„index</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/29/hexoé™æ€ç½‘ç«™/Hexo+NexT æ·»åŠ åˆ†ç±»ã€æ ‡ç­¾ã€å…³äºèœå•é¡¹/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qicainiao">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qicainiao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/29/hexoé™æ€ç½‘ç«™/Hexo+NexT æ·»åŠ åˆ†ç±»ã€æ ‡ç­¾ã€å…³äºèœå•é¡¹/" itemprop="url">hexoæ­å»ºé™æ€ç½‘ç«™-Hexo+NexT æ·»åŠ åˆ†ç±»ã€æ ‡ç­¾ã€å…³äºèœå•é¡¹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-08-29T10:20:09+08:00">
                2019-08-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/hexoæ­å»ºé™æ€ç½‘ç«™/" itemprop="url" rel="index">
                    <span itemprop="name">hexoæ­å»ºé™æ€ç½‘ç«™</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æç®€é£æ ¼åšå®¢ =windows + hexos + github<br>Hexo NexTä¸»é¢˜ä¸‹é»˜è®¤æœ‰é¦–é¡µå’Œå½’æ¡£ä¸¤ä¸ªèœå•ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¼€å¯å…¶ä»–èœå•é¡¹ï¼Œæ¯”å¦‚åˆ†ç±»ã€æ ‡ç­¾ã€å…³äº<br>è¿™æ˜¯è¿™ç¯‡æ•™ç¨‹çš„æˆå“å›¾</p>
<p><img src="/images/hexo/2-1.png" alt></p>
<p>é¦–å…ˆæ‰“å¼€ä¸»é¢˜ä¸‹çš„é…ç½®æ–‡ä»¶_config.ymlï¼Œç„¶åæœç´¢menuæ‰¾åˆ°å¦‚ä¸‹é…ç½®é¡¹ï¼Œå°†aboutã€tagsã€categorieså‰çš„#å·å»æ‰ï¼Œå°±å¼€å¯äº†å…³äºã€æ ‡ç­¾å’Œåˆ†ç±»æ ‡ç­¾ï¼Œå½“ç„¶è¿˜æœ‰å…¶ä»–èœå•é¡¹ä¹Ÿå¯ä»¥å¼€å¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Menu Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># When running the site in a subdirectory (e.g. domain.tld/blog), remove the leading slash from link value (/archives -&gt; archives).</span></span><br><span class="line"><span class="comment"># Usage: `Key: /link/ || icon`</span></span><br><span class="line"><span class="comment"># Key is the name of menu item. If the translation for this item is available, the translated text will be loaded, otherwise the Key name will be used. Key is case-senstive.</span></span><br><span class="line"><span class="comment"># Value before `||` delimiter is the target link.</span></span><br><span class="line"><span class="comment"># Value after `||` delimiter is the name of FontAwesome icon. If icon (with or without delimiter) is not specified, question icon will be loaded.</span></span><br><span class="line"><span class="comment"># External url should start with http:// or https://</span></span><br><span class="line">menu:</span><br><span class="line">  home: / || home</span><br><span class="line">  about: /about/ || user</span><br><span class="line">  tags: /tags/ || tags</span><br><span class="line">  categories: /categories/ || th</span><br><span class="line">  archives: /archives/ || archive</span><br><span class="line">  <span class="comment">#schedule: /schedule/ || calendar</span></span><br><span class="line">  <span class="comment">#sitemap: /sitemap.xml || sitemap</span></span><br></pre></td></tr></table></figure>

<p>é‡æ–°ç”Ÿæˆéƒ¨ç½²åï¼Œå¯ä»¥çœ‹åˆ°æ–°å¢çš„èœå•é¡¹ï¼Œä½†æ˜¯å•å‡»åä¼šæŠ¥å¦‚ä¸‹é”™è¯¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Cannot GET /about/</span><br><span class="line">Cannot GET /tags/</span><br><span class="line">Cannot GET /categories/</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯å› ä¸ºä½ è¿˜éœ€è¿è¡Œå¦‚ä¸‹å‘½ä»¤æ–°å»ºç›¸å…³é¡µé¢</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="string">"about"</span></span><br><span class="line">hexo new page <span class="string">"tags"</span></span><br><span class="line">hexo new page <span class="string">"categories"</span></span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œä¼šå†sourceæ–‡ä»¶ä¸‹åˆ›å»ºaboutã€tagsã€categoriesæ–‡ä»¶å¤¹ï¼Œæ¯ä¸ªæ–‡ä»¶å¤¹ä¸‹è¿˜ä¼šåˆ›å»ºä¸€ä¸ªindex.mdæ–‡ä»¶è¡¨ç¤ºå…³äºã€æ ‡ç­¾é¡µåˆ†ç±»é¡µé¢ï¼Œç¼–è¾‘è¿™ä¸‰ä¸ªMarkDownæ–‡ä»¶å¯ä»¥è‡ªå®šä¹‰è¿™ä¸‰ä¸ªé¡µé¢çš„å†…å®¹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">D:\hexo\blog&gt;hexo new page <span class="string">"about"</span></span><br><span class="line">INFO  Created: D:\hexo\blog\<span class="built_in">source</span>\about\index.md</span><br><span class="line"> </span><br><span class="line">D:\hexo\blog&gt;hexo new page <span class="string">"tags"</span></span><br><span class="line">INFO  Created: D:\hexo\blog\<span class="built_in">source</span>\tags\index.md</span><br><span class="line"> </span><br><span class="line">D:\hexo\blog&gt;hexo new page <span class="string">"categories"</span></span><br><span class="line">INFO  Created: D:\hexo\blog\<span class="built_in">source</span>\categories\index.md</span><br></pre></td></tr></table></figure>

<p>è¿˜å·®æœ€åä¸€æ­¥ï¼Œæ‰“å¼€å„é¡µé¢å¯¹åº”çš„index.mdæ–‡ä»¶ï¼Œç¼–è¾‘å¦‚ä¸‹å†…å®¹ï¼Œtitleå’Œdateæ˜¯é»˜è®¤ç”Ÿæˆçš„ï¼Œå¢åŠ typeå³å¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: about</span><br><span class="line">date: 2019-08-29 09:50:23</span><br><span class="line"><span class="built_in">type</span>: <span class="string">"about"</span></span><br><span class="line">---</span><br><span class="line"> </span><br><span class="line">---</span><br><span class="line">title: about</span><br><span class="line">date: 2019-08-29 09:50:23</span><br><span class="line"><span class="built_in">type</span>: <span class="string">"tags"</span></span><br><span class="line">---</span><br><span class="line"> </span><br><span class="line">---</span><br><span class="line">title: about</span><br><span class="line">date: 2019-08-29 09:50:23</span><br><span class="line"><span class="built_in">type</span>: <span class="string">"categories"</span></span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<p>é‡æ–°ç”Ÿæˆå’Œéƒ¨ç½²å³å¯çœ‹åˆ°æ•ˆæœ</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/29/hexoé™æ€ç½‘ç«™/æ­å»ºgithubåšå®¢/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qicainiao">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qicainiao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/29/hexoé™æ€ç½‘ç«™/æ­å»ºgithubåšå®¢/" itemprop="url">hexoæ­å»ºé™æ€ç½‘ç«™-æ­å»ºgithubåšå®¢</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-08-29T10:15:31+08:00">
                2019-08-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/hexoæ­å»ºé™æ€ç½‘ç«™/" itemprop="url" rel="index">
                    <span itemprop="name">hexoæ­å»ºé™æ€ç½‘ç«™</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æç®€é£æ ¼åšå®¢ =windows + hexos + github<br>è¿™æ˜¯è¿™ç¯‡æ•™ç¨‹çš„æˆå“å›¾</p>
<p><img src="/images/hexo/1-1.png" alt></p>
<p>#åšå®¢æ­å»ºåˆ†ä¸ºä¸‰æ­¥ï¼š#</p>
<ul>
<li>åˆ›å»ºgithubåŸŸååŠç©ºé—´</li>
<li>gitï¼Œnodejsï¼Œhexoä¸‹è½½åŠå®‰è£…</li>
<li>é…ç½®ç¯å¢ƒ</li>
</ul>
<p>##1.åˆ›å»ºgithubåŸŸååŠç©ºé—´<br>è¿›å…¥githubå®˜ç½‘ï¼Œæ³¨å†Œå¹¶ç™»å½•ã€‚<br>ç™»å½•åï¼Œç‚¹å‡»å³ä¸Šè§’çš„ â€œ+â€ å·ï¼Œé€‰æ‹© â€œnew repositoryâ€ , ä¼šå‡ºç°ä»¥ä¸‹ç•Œé¢ï¼š</p>
<p><img src="/images/hexo/1-2.png" alt></p>
<p>åœ¨ repository name ä¸­å¡«å…¥ username.github.io ã€‚ï¼ˆusernameæŒ‡çš„æ˜¯å‰é¢ownerçš„ç”¨æˆ·åï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œåº”è¯¥å¡« wenjie710.github.io ã€‚ï¼‰<br>ç„¶åç‚¹å‡»æœ€ä¸‹é¢çš„create repository å³å¯ã€‚<br>2.å®‰è£… gitï¼Œnodejsï¼Œhexo<br>ä¸‹è½½åœ°å€ï¼š<br>gitå®˜ç½‘ä¸‹è½½ï¼š<a href="https://git-scm.com/download/win" target="_blank" rel="noopener">https://git-scm.com/download/win</a><br>nodejså®˜ç½‘ä¸‹è½½ï¼š<a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">https://nodejs.org/en/download/</a><br>ä»¥ä¸Šä¸¤ä¸ªå·¥å…·éƒ½æ˜¯ç›´æ¥ä¸‹è½½çš„exeæ–‡ä»¶ï¼Œç‚¹å‡»å®‰è£…å³å¯ã€‚å®‰è£…å®Œæˆä¹‹ååœ¨æ–‡ä»¶å¤¹ä¸­ç‚¹å‡»é¼ æ ‡å³é”®ä¼šçœ‹åˆ°ä¸‹æ‹‰èœå•ä¸­æœ‰ä¸€ä¸ª Git Bash ï¼Œè¿™æ˜¯ä¸€ä¸ªç±»ä¼¼äºLiunxçš„ç»ˆç«¯ï¼Œåœ¨é‡Œé¢å¯ä»¥æ¨¡æ‹ŸLinuxä¸‹çš„ç»ˆç«¯è¿›è¡Œæ“ä½œã€‚<br>git å’Œ nodejs å®‰è£…å®Œæˆä¹‹åæ‰èƒ½å®‰è£…hexoã€‚hexoçš„å®‰è£…ååˆ†ç®€å•ï¼Œåªéœ€è¦åœ¨å‘½ä»¤æç¤ºç¬¦ï¼ˆcmdï¼‰ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤å³å¯ã€‚</p>
<pre><code>npm install -g hexo-cli</code></pre><p>3.é…ç½®ç¯å¢ƒ<br>3.1 é…ç½®ssh<br>æ‰“å¼€ Git Bash ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ç”Ÿæˆ SSH è®¿é—®ç§é’¥åŠå…¬é’¥ã€‚</p>
<pre><code>ssh-keygen -t rsa -C &quot;email@email.com&quot;</code></pre><p>è¾“å…¥å‘½ä»¤å›è½¦ä¹‹åä¼šæç¤ºä½ è¾“å…¥ä¸€äº›ä¸œè¥¿ï¼Œä¸ç”¨ç®¡ã€‚ä¸€ç›´å›è½¦åˆ°åº•å°±å¥½äº†ã€‚ç„¶åä½ çš„ ~/.ssh æ–‡ä»¶ä¸‹å°±ä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ id_rsa å’Œ id_rsa.pub ã€‚</p>
<p><img src="/images/hexo/1-3.png" alt></p>
<p>æ‰“å¼€ä½ çš„ Github -&gt; setting -&gt; SSH Keys ã€‚ç„¶åç‚¹å‡» New SSH Key åˆ›å»ºä¸€ä¸ªæ–°çš„SSH Keyã€‚å°†æ–‡ä»¶ id_rsa.pub ä¸­çš„æ‰€ä»¥å†…å®¹å¤åˆ¶ç²˜è´´åˆ° Key ä¸‹é¢ã€‚ç„¶åä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æµ‹è¯•æ˜¯å¦å¯ä»¥è¿æ¥ä¸Š Github.</p>
<pre><code>ssh -T git@github.com</code></pre><p>3.2 ç¼–å†™é…ç½®ï¼Œå‘å¸ƒåšå®¢<br>3.2.1 ä¸»é¢˜å®‰è£…<br>æ–°å»ºä¸€ä¸ªç”¨ä»¥å­˜å‚¨åšå®¢çš„æ–‡ä»¶å¤¹</p>
<pre><code>hexo init username@github.io</code></pre><p>å®‰è£…ä¸»é¢˜ï¼Œæ¨è nextï¼Œ å…¶å®ƒä¹Ÿè¡Œï¼Œå¯ä»¥è‡ªå·±é€‰é€‰ã€‚</p>
<pre><code>cd username@github.io
git clone https://github.com/iissnan/hexo-theme-next themes/next</code></pre><p>3.2.2 è‡ªå®šä¹‰é…ç½®æ–‡ä»¶<br>æ‰“å¼€ username.github.io/_config.yml ï¼Œä¿®æ”¹ä»¥ä¸‹é”®å€¼å¯¹(æ³¨æ„å†’å·ä¹‹åä¸€å®šè¦æœ‰ç©ºæ ¼ï¼‰ï¼š</p>
<pre><code>title: GA-17&apos;s Blog
subtitle:
description: Hello World!
author: GA-17
language: zh-Hans
theme: next
deploy:
  type: git
  repo: https://github.com/wenjie710/wenjie710.github.io.git
  branch: master</code></pre><p>3.2.3 é…ç½®å®Œæˆï¼Œå†™æ–‡ç« ï¼ï¼ï¼<br>åœ¨username.github.io/source/_postsä¸‹åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªåšå®¢å§ï¼Œä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºFirstBlog.mdçš„æ–‡ä»¶ï¼Œæ ¼å¼ç”¨Markdownï¼Œæ³¨æ„ä¿å­˜ã€‚</p>
<pre><code>---
title: My First Blog
---</code></pre><p>å’±çš„åšå®¢æ­å»ºå®Œæˆå•¦ï¼ï¼</p>
<p>3.2.4 å‘å¸ƒ<br>å®‰è£…hexo-deployer-gitè‡ªåŠ¨éƒ¨ç½²å‘å¸ƒå·¥å…·</p>
<pre><code>npm install hexo-deployer-git --save</code></pre><p>å‘å¸ƒåšå®¢</p>
<pre><code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo d

# hexo clean æ¸…é™¤ç¼“å­˜
# hexo g ç”Ÿæˆé™æ€é¡µé¢
# hexo s å¯åŠ¨æœåŠ¡é¢„è§ˆ
# hexo d å¼€å§‹éƒ¨ç½²</code></pre><p>å¦‚æœè¿™æ˜¯ç¬¬ä¸€æ¬¡ç™»å½•ï¼Œç»ˆç«¯ä¼šè®©ä½ è¾“å…¥Github çš„é‚®ç®±å’Œå¯†ç ï¼Œæ­£ç¡®è¾“å…¥åï¼Œå°±ä¼šæŠŠä½ çš„åšå®¢ä¸Šä¼ è‡³Github äº†ã€‚ä»¥ååœ¨æ¯æ¬¡æŠŠåšå®¢å†™å®Œåï¼Œæ‰§è¡Œä¸€ä¸‹è¿™ä¸ªå‘½ä»¤å³å¯ã€‚<br>è‡³æ­¤ï¼Œåšå®¢æ­å»ºå®Œæˆã€‚è¿›å…¥<a href="https://username.github.io" target="_blank" rel="noopener">https://username.github.io</a> å°±èƒ½çœ‹è§è‡ªå·±çš„åšå®¢å•¦ï¼ï¼ï¼</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/28/webpackç³»åˆ—/webpackæ€§èƒ½ä¼˜åŒ–/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qicainiao">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qicainiao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/28/webpackç³»åˆ—/webpackæ€§èƒ½ä¼˜åŒ–/" itemprop="url">webpackç³»åˆ—-webpackæ€§èƒ½ä¼˜åŒ–</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-08-28T18:41:57+08:00">
                2019-08-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/webpackç³»åˆ—/" itemprop="url" rel="index">
                    <span itemprop="name">webpackç³»åˆ—</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æˆ‘ä»¬åœ¨æ‰“åŒ…çš„æ—¶å€™éœ€è¦è€—è´¹éå¸¸å¤šçš„æ—¶é—´ï¼Œæ‰€ä»¥åœ¨ä¸€äº›å¤§å‹é¡¹ç›®çš„æ—¶å€™éœ€è¦æå‡webpackçš„æ‰“åŒ…æ•ˆç‡ã€‚</p>
<h2 id="è·Ÿä¸ŠæŠ€æœ¯çš„è¿­ä»£ï¼ˆnode-npm-yarnï¼‰"><a href="#è·Ÿä¸ŠæŠ€æœ¯çš„è¿­ä»£ï¼ˆnode-npm-yarnï¼‰" class="headerlink" title="è·Ÿä¸ŠæŠ€æœ¯çš„è¿­ä»£ï¼ˆnode,npm,yarnï¼‰"></a>è·Ÿä¸ŠæŠ€æœ¯çš„è¿­ä»£ï¼ˆnode,npm,yarnï¼‰</h2><p>ã€€å‡çº§webpackï¼Œnodeï¼Œnpmï¼Œyarnçš„ç‰ˆæœ¬ã€‚æ–°çš„ç‰ˆæœ¬ä¼šåšä¼˜åŒ–</p>
<h2 id="åœ¨å°½å¯èƒ½å°‘çš„æ¨¡å—ä¸Šåº”ç”¨Loader"><a href="#åœ¨å°½å¯èƒ½å°‘çš„æ¨¡å—ä¸Šåº”ç”¨Loader" class="headerlink" title="åœ¨å°½å¯èƒ½å°‘çš„æ¨¡å—ä¸Šåº”ç”¨Loader"></a>åœ¨å°½å¯èƒ½å°‘çš„æ¨¡å—ä¸Šåº”ç”¨Loader</h2><p>æ¯”å¦‚æ›¾ç»æœ‰ä¸ªåŠŸèƒ½å°†thisæŒ‡å‘windowçš„åŠŸèƒ½</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rules:[&#123;</span><br><span class="line">ã€€ã€€use:[&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€loader: <span class="string">'imports-loader?this=&gt;window'</span></span><br><span class="line">ã€€ã€€&#125;]</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ—¶å€™å¯ä»¥æŠŠä»–å¹²æ‰ï¼Œä½œç”¨ä¸å¤§ã€‚<br>æ¯”å¦‚jsæ‰“åŒ…ä¸€å®šè¦åŠ exclude:/node_modules/</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rules:[&#123;</span><br><span class="line">ã€€ã€€<span class="built_in">test</span>:/\.js$/,</span><br><span class="line">ã€€ã€€exclude:/node_modules/</span><br><span class="line">ã€€ã€€use:[[</span><br><span class="line">ã€€ã€€ã€€ã€€loader:<span class="string">'babel-loader'</span></span><br><span class="line">ã€€ã€€]]</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>

<p>node_modulesçš„ç¬¬ä¸‰æ–¹æ¨¡å—éƒ½æ˜¯ç¼–è¯‘è¿‡ï¼Œä¸éœ€è¦äºŒæ¬¡æ‰“åŒ…ï¼Œåˆç†ä½¿ç”¨exclude,include</p>
<h2 id="å°½å¯èƒ½å°‘çš„ä½¿ç”¨pluginï¼ŒåŒæ—¶ç¡®ä¿pluginçš„å¯é æ€§ã€‚"><a href="#å°½å¯èƒ½å°‘çš„ä½¿ç”¨pluginï¼ŒåŒæ—¶ç¡®ä¿pluginçš„å¯é æ€§ã€‚" class="headerlink" title="å°½å¯èƒ½å°‘çš„ä½¿ç”¨pluginï¼ŒåŒæ—¶ç¡®ä¿pluginçš„å¯é æ€§ã€‚"></a>å°½å¯èƒ½å°‘çš„ä½¿ç”¨pluginï¼ŒåŒæ—¶ç¡®ä¿pluginçš„å¯é æ€§ã€‚</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const MiniCssExtractPlugin = require(<span class="string">'mini-css-extract-plugin'</span>);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">ã€€ã€€plugins:[</span><br><span class="line">ã€€ã€€ã€€ã€€new MiniCssExtractPlugin(&#123;&#125;)</span><br><span class="line">ã€€ã€€]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¯”å¦‚ä¸Šçº¿çš„æ—¶å€™ä½¿ç”¨OptimizeCSSAssetsPluginï¼Œå‹ç¼©cssçš„æ’ä»¶ã€‚å¸Œæœ›åœ¨æ‰“åŒ…ç”Ÿæˆä»£ç çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘å¼•å…¥äº†cssæ–‡ä»¶ï¼Œé‚£ä¹ˆæŠŠcssæ–‡ä»¶æ‰“åŒ…åˆ°distç›®å½•ä¸‹ã€‚è€Œä¸æ˜¯ç›´æ¥å¼•å…¥åˆ°jsæ–‡ä»¶é‡Œé¢ã€‚å¦‚æœæ˜¯å¼€å‘ç¯å¢ƒï¼Œå°±ä¸éœ€è¦ä½¿ç”¨è¿™ä¸ªæ’ä»¶ï¼Œä¸å¯¹ä»£ç è¿›è¡Œå‹ç¼©ï¼Œå°±èŠ‚çº¦äº†ä»£ç æ‰“åŒ…å‹ç¼©çš„æ—¶é—´ã€‚æ‰€ä»¥æ’ä»¶å°½é‡ä½¿ç”¨å®˜æ–¹çš„æ’ä»¶ï¼Œå®˜æ–¹çš„æ’ä»¶æ˜¯ç»è¿‡å®˜ç½‘æµ‹è¯•çš„ï¼Œåœ¨è‡ªå·±å¼•ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦æ˜¯ç¤¾åŒºé‡Œç»è¿‡æµ‹è¯•çš„ã€‚å¯ä»¥æœ‰æ•ˆæå‡webpackæ‰“åŒ…é€Ÿåº¦ã€‚</p>
<h2 id="resolveå‚æ•°åˆç†é…ç½®"><a href="#resolveå‚æ•°åˆç†é…ç½®" class="headerlink" title="resolveå‚æ•°åˆç†é…ç½®"></a>resolveå‚æ•°åˆç†é…ç½®</h2><p>æ¯”å¦‚æˆ‘ä»¬ä¹‹å‰å¼•å…¥ä¸€ä¸ªjsæ–‡ä»¶çš„æ—¶å€™ï¼Œæ˜¯è¿™æ ·çš„ï¼Œimport Child from â€˜../child/childâ€™ã€‚<br>åé¢æ²¡æœ‰åŠ jsåç¼€ä¹Ÿå¯ä»¥å¼•å…¥ã€‚åœ¨ä¸€å¼€å§‹çš„æ—¶å€™æ˜¯ä¸æ”¯æŒè¿™æ ·å¼•å…¥çš„ã€‚å¯ä»¥å¼•å…¥æ˜¯å› ä¸ºwebpackä¸‹æœ‰è¿™ä¹ˆä¸€æ®µä»£ç </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">ã€€ã€€extensions: [<span class="string">'./js'</span>, <span class="string">'.jsx'</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“çœ‹åˆ°resolveå¯ä»¥è¿™ä¹ˆé…ï¼Œå°±æƒ³å¥½å¤šä¸œè¥¿éƒ½é…ç½®åœ¨è¿™é‡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">ã€€ã€€extensions: [<span class="string">'./css'</span>, <span class="string">'./jpg'</span>, <span class="string">'./js'</span>, <span class="string">'.jsx'</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å°±æ„å‘³ç€å¾ˆå¤šæ¬¡æŸ¥æ‰¾ï¼Œæ¯æ¬¡æŸ¥æ‰¾çš„æ—¶å€™ä¸€èˆ¬ä¼šæŸè€—æ€§èƒ½çš„ã€‚ä¸€èˆ¬js,jsxçš„æ—¶å€™é…ç½®resolveï¼Œå…¶ä»–æ‰‹åŠ¨å†™åç¼€å»å¼•å…¥ã€‚</p>
<p>resolveè¿˜æœ‰å…¶ä»–çš„ç”¨æ³•ï¼Œæ¯”å¦‚src/child/childè¿™æ ·å¼•å…¥ã€‚import Child from â€˜./child/â€˜è¿™æ ·ä¹Ÿå¯ä»¥å¼•å…¥child.jsæ–‡ä»¶ï¼Œæœ¬èº«è¿™æ ·å¼•å…¥æ˜¯ä¸è¡Œçš„ï¼Œå¦‚æœæŠŠchild.jsæ”¹æˆindex.jsä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯ç°åœ¨æ˜¯child.jsï¼Œä¸æ˜¯index.jsæ€ä¹ˆå¼„</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">ã€€ã€€extensions: [<span class="string">'./js'</span>, <span class="string">'.jsx'</span>],</span><br><span class="line">ã€€ã€€mainFiles: [<span class="string">'index'</span>, <span class="string">'child'</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»–çš„æ„æ€æ˜¯å¼•å…¥æŸä¸ªç›®å½•ä¸‹ä¸çŸ¥é“ä»€ä¹ˆæ–‡ä»¶çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šå…ˆå°è¯•å»æ‰¾indexæ–‡ä»¶ï¼Œå¦‚æœindexæ–‡ä»¶ä¸å­˜åœ¨å†å»æ‰¾childæ–‡ä»¶ã€‚è¿™æ ·é¢å¤–é…ç½®resolveé‡Œé¢çš„å†…å®¹ä¹Ÿä¼šæœ‰å½±å“ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¸è¿™æ ·é…ã€‚</p>
<p>resolveè¿˜æœ‰å…¶ä»–çš„é…ç½®é¡¹ã€‚æ¯”å¦‚aliasï¼Œå½“æ–‡ä»¶æ¯”è¾ƒæ·±çš„æ—¶å€™å¯ä»¥å¼•å…¥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">ã€€ã€€<span class="built_in">alias</span>: &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€child: path.resolve(__dirname, <span class="string">'../src/a/b/c'</span>)</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨æ–‡ä»¶ä¸­ç›´æ¥ import Child from â€˜child/xxx.jsâ€™å°±å¯ä»¥äº†ã€‚</p>
<h2 id="ä½¿ç”¨DllPluginæé«˜æ‰“åŒ…é€Ÿåº¦"><a href="#ä½¿ç”¨DllPluginæé«˜æ‰“åŒ…é€Ÿåº¦" class="headerlink" title="ä½¿ç”¨DllPluginæé«˜æ‰“åŒ…é€Ÿåº¦"></a>ä½¿ç”¨DllPluginæé«˜æ‰“åŒ…é€Ÿåº¦</h2><p>index.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123;Component&#125; from <span class="string">'react'</span>;</span><br><span class="line">import &#123; BrowserRouter, Route &#125; from <span class="string">'react-router-dom'</span>;</span><br><span class="line">import ReactDom from <span class="string">'react-dom'</span>;</span><br><span class="line">import _ from <span class="string">'lodash'</span>;</span><br><span class="line"></span><br><span class="line">class App extends Component&#123;</span><br><span class="line">ã€€ã€€<span class="function"><span class="title">render</span></span>() &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="built_in">return</span> (</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€&lt;BrowserRouter&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€&lt;div&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€&#123;_.join([<span class="string">'this'</span>,<span class="string">'is'</span>,<span class="string">'app'</span>], <span class="string">' '</span>)&#125;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€&lt;/div&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€&lt;/BrowserRouter&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€)</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDom.render(&lt;App/&gt;, document.getElementById(<span class="string">'root'</span>));</span><br></pre></td></tr></table></figure>

<p>åƒlodashè¿™æ ·çš„ç¬¬ä¸‰æ–¹æ¨¡å—åŠ è¿›å»åï¼Œå¤§æ¦‚æ‰“åŒ…å¤šäº†ä¸€ç™¾å¤šmsã€‚åƒè¿™ç§ä»£ç ä¸ä¼šå˜å¤šç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œæˆ‘ä»¬ä¸å¿…æ¯æ¬¡éƒ½å»æ‰“åŒ…åˆ†æï¼Œç¬¬äºŒæ¬¡ç›´æ¥ç”¨ç¬¬ä¸€æ¬¡åˆ†æå¥½å¤šç»“æœå°±å¥½äº†ã€‚é¦–å…ˆå»ºç«‹ä¸€ä¸ªwebpack.dll.js</p>
<p>webpack.dll.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const path = require(<span class="string">'path'</span>);</span><br><span class="line">module.exports = &#123;</span><br><span class="line">ã€€ã€€mode: <span class="string">'production'</span>,</span><br><span class="line">ã€€ã€€entry:&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€vendors: [<span class="string">'react'</span>, <span class="string">'react-dom'</span>, <span class="string">'lodash'</span>]</span><br><span class="line">ã€€ã€€&#125;,</span><br><span class="line">ã€€ã€€output:&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€filename: <span class="string">'[name].dll.js'</span>,</span><br><span class="line">ã€€ã€€ã€€ã€€path: path.resolve(__dirname, <span class="string">'../dll'</span>),</span><br><span class="line">ã€€ã€€ã€€ã€€// é€šè¿‡ä¸€ä¸ªå…¨å±€å˜é‡æš´éœ²å‡ºå»ï¼Œå…¨å±€å˜é‡å«åšvendors</span><br><span class="line">ã€€ã€€ã€€ã€€library: <span class="string">'[name]'</span></span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åé…ç½®æ–‡ä»¶å¢åŠ ä¸€ä¸ª</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">ã€€ã€€<span class="string">"build:dll"</span>: <span class="string">"webpack --config ./build/webpack.dll.js"</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘ä»¬æ‰“åŒ…å¥½äº†ä¸€ä¸ªå«åšvendors.dll.jsçš„æ–‡ä»¶ã€‚æ€ä¹ˆå¼•ç”¨ï¼Œæˆ‘ä»¬æŠŠvendors.dll.jsæ¤å…¥åˆ°index.htmlé‡Œé¢ï¼Œå°±å¯ä»¥å…¨å±€å¼•å…¥vendorsè¿™ä¸ªå˜é‡</p>
<p>å®‰è£…ä¸€ä¸ªæ’ä»¶ï¼Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install add-asset-html-webpack-plugin --save</span><br></pre></td></tr></table></figure>

<p>é¡¾åæ€ä¹‰å°±æ˜¯åœ¨htmlé‡Œé¢å»å¢åŠ ä¸€äº›é™æ€çš„èµ„æº.å®‰è£…å¥½åï¼Œé…ç½®webpack.common.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const AddAssetHtmlWebpackPlugin = require(<span class="string">'add-asset-html-webpack-plugin'</span>);</span><br><span class="line">plugins: [</span><br><span class="line">ã€€ã€€// filepathè¡¨ç¤ºè¦å¢åŠ åˆ°æ–‡ä»¶æ˜¯å“ªäº›</span><br><span class="line">ã€€ã€€new AddAssetHtmlWebpackPlugin(&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€filepath: path.resolve(__dirname, <span class="string">'../dll/vendors.dll.js'</span>)</span><br><span class="line">ã€€ã€€&#125;)</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<p>ç„¶åè¿è¡Œnpm run dev (â€œwebpack-dev-server â€“config ./build/webpack.common.jsâ€)ã€‚æ‰“å¼€æ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»å¼•å…¥äº†vendors.dll.jsã€‚ä¹Ÿæœ‰äº†vendorsè¿™ä¸ªå…¨å±€å˜é‡ã€‚</p>
<p>åˆ°äº†è¿™ä¸€æ­¥ï¼Œç¦»ç›®æ ‡è¿‘äº†ä¸€æ­¥ã€‚æˆ‘ä»¬åˆ°ç›®æ ‡æ˜¯ç¬¬ä¸‰æ–¹æ¨¡å—åªæ‰“åŒ…ä¸€æ¬¡ã€‚ç°åœ¨æˆ‘ä»¬æ‰“åŒ…å¥½äº†ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œå¯ä»¥è¢«ä½¿ç”¨ã€‚ä½†è¿˜æ²¡æœ‰è¢«ä½¿ç”¨çš„è¿™ä¸€æ­¥ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹æ€ä¹ˆä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—ã€‚<br>webpack.dll.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const path = require(<span class="string">'path'</span>);</span><br><span class="line">const webpack = require(<span class="string">'webpack'</span>);</span><br><span class="line">module.exports = &#123;</span><br><span class="line">ã€€ã€€plugins: [</span><br><span class="line">ã€€ã€€ã€€ã€€// ç”¨è¿™ä¸ªæ’ä»¶åˆ†æè¿™ä¸ªåº“ï¼ŒæŠŠåº“é‡Œé¢ä¸€äº›ç¬¬ä¸‰æ–¹æ¨¡å—çš„æ˜ å°„å…³ç³»æ”¾åˆ°äº†dllä¸‹é¢çš„vendors.mainfest.json</span><br><span class="line">ã€€ã€€ã€€ã€€new webpack.DllPlugin(&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€name: <span class="string">'[name]'</span>,</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€path: path.resolve(__dirname, <span class="string">'../dll/[name].manifest.json'</span>)</span><br><span class="line">ã€€ã€€ã€€ã€€&#125;)</span><br><span class="line">ã€€ã€€]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>webpack.common.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">ã€€ã€€plugins: [</span><br><span class="line">ã€€ã€€ã€€ã€€/**</span><br><span class="line">ã€€ã€€ã€€ã€€* ä½¿ç”¨è¿™ä¸ªæ’ä»¶ï¼Œå½“æ‰“åŒ…index.jsçš„æ—¶å€™ï¼Œä¼šå¼•å…¥ä¸€äº›ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œå½“å‘ç°ç¬¬ä¸‰æ–¹æ¨¡å—çš„æ—¶å€™ï¼Œä¼šå»manifestå»æ‰¾æ˜ å°„å…³ç³»</span><br><span class="line">ã€€ã€€ã€€ã€€* æ‰¾åˆ°å°±ä¸ç”¨å†é‡æ–°åˆ†ææ‰“åŒ…äº†ï¼Œå»vendorsè¿™ä¸ªå…¨å±€å˜é‡æ‰¾å°±å¥½äº†</span><br><span class="line">ã€€ã€€ã€€ã€€* ä¸åœ¨ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œæ‰ä¼šå»åˆ†æ</span><br><span class="line">ã€€ã€€ã€€ã€€*/</span><br><span class="line">ã€€ã€€ã€€ã€€new webpack.DllReferencePlugin(&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€manifest: path.resolve(__dirname, <span class="string">'../dll/vendors.manifest.json'</span>)</span><br><span class="line">ã€€ã€€ã€€ã€€&#125;)</span><br><span class="line">ã€€ã€€],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åé‡æ–°æ‰“åŒ…ï¼Œçœ‹åˆ°ä¹‹å‰æ—¶é—´æ˜¯1500mså·¦å³ï¼Œç°åœ¨æ˜¯1100mså·¦å³ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹æ‰“åŒ…çš„webpack.dll.jsè¿›è¡Œæ‹†åˆ†</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">const path = require(<span class="string">'path'</span>);</span><br><span class="line">const webpack = require(<span class="string">'webpack'</span>);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">ã€€ã€€mode: <span class="string">'production'</span>,</span><br><span class="line">ã€€ã€€entry:&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€vendors: [<span class="string">'lodash'</span>],</span><br><span class="line">ã€€ã€€ã€€ã€€react: [<span class="string">'react'</span>, <span class="string">'react-dom'</span>]</span><br><span class="line">ã€€ã€€&#125;,</span><br><span class="line">ã€€ã€€output:&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€filename: <span class="string">'[name].dll.js'</span>,</span><br><span class="line">ã€€ã€€ã€€ã€€path: path.resolve(__dirname, <span class="string">'../dll'</span>),</span><br><span class="line">ã€€ã€€ã€€ã€€// é€šè¿‡ä¸€ä¸ªå…¨å±€å˜é‡æš´éœ²å‡ºå»ï¼Œå…¨å±€å˜é‡å«åšvendors</span><br><span class="line">ã€€ã€€ã€€ã€€library: <span class="string">'[name]'</span></span><br><span class="line">ã€€ã€€&#125;,</span><br><span class="line">ã€€ã€€plugins: [</span><br><span class="line">ã€€ã€€ã€€ã€€// ç”¨è¿™ä¸ªæ’ä»¶åˆ†æè¿™ä¸ªåº“ï¼ŒæŠŠåº“é‡Œé¢ä¸€äº›ç¬¬ä¸‰æ–¹æ¨¡å—çš„æ˜ å°„å…³ç³»æ”¾åˆ°äº†dllä¸‹é¢çš„vendors.mainfest.json</span><br><span class="line">ã€€ã€€ã€€ã€€new webpack.DllPlugin(&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€name: <span class="string">'[name]'</span>,</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€path: path.resolve(__dirname, <span class="string">'../dll/[name].manifest.json'</span>)</span><br><span class="line">ã€€ã€€ã€€ã€€&#125;)</span><br><span class="line">ã€€ã€€]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å†æ‰§è¡Œnpm run build:dllï¼ˆâ€build:dllâ€: â€œwebpack â€“config ./build/webpack.dll.jsâ€ï¼‰ã€‚ç”Ÿæˆäº†vendors.dll.jså’Œreact.dll.jsä¸¤ä¸ªæ–‡ä»¶ã€‚åŒæ—¶webpack.commmon.jsä¹Ÿè¦å¢åŠ æ–°å¢çš„æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">ã€€ã€€plugins: [</span><br><span class="line">ã€€ã€€ã€€ã€€new AddAssetHtmlWebpackPlugin(&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€filepath: path.resolve(__dirname, <span class="string">'../dll/vendors.dll.js'</span>)</span><br><span class="line">ã€€ã€€ã€€ã€€&#125;),</span><br><span class="line">ã€€ã€€ã€€ã€€new AddAssetHtmlWebpackPlugin(&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€filepath: path.resolve(__dirname, <span class="string">'../dll/react.dll.js'</span>)</span><br><span class="line">ã€€ã€€ã€€ã€€&#125;),</span><br><span class="line">ã€€ã€€ã€€ã€€new webpack.DllReferencePlugin(&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€manifest: path.resolve(__dirname, <span class="string">'../dll/vendors.manifest.json'</span>)</span><br><span class="line">ã€€ã€€ã€€ã€€&#125;),</span><br><span class="line">ã€€ã€€ã€€ã€€new webpack.DllReferencePlugin(&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€manifest: path.resolve(__dirname, <span class="string">'../dll/react.manifest.json'</span>)</span><br><span class="line">ã€€ã€€ã€€ã€€&#125;)</span><br><span class="line">ã€€ã€€]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‚£å¦‚æœåœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œdllæ–‡ä»¶å°±ä¼šéå¸¸çš„å¤šï¼Œåœ¨pluginsé‡Œé¢ä¹Ÿè¦ä¸æ–­çš„åŠ dll.jså’Œmainfest.jsonã€‚æˆ‘ä»¬è¿™æ ·åšä¸ªä¼˜åŒ–</p>
<p>æŠŠåŸºç¡€çš„pluginsæå–å‡ºæ¥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const plugins = [</span><br><span class="line">ã€€ã€€// HtmlWebpackPluginä¼šåœ¨æ‰“åŒ…ç»“æŸåï¼Œè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªhtmlæ–‡ä»¶ï¼Œå¹¶æŠŠæ‰“åŒ…ç”Ÿæˆçš„jsè‡ªåŠ¨å¼•å…¥åˆ°è¿™ä¸ªhtmlæ–‡ä»¶ä¸­</span><br><span class="line">ã€€ã€€new HtmlWebpackPlugin(&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€template: <span class="string">'src/index.html'</span></span><br><span class="line">ã€€ã€€&#125;),</span><br><span class="line">ã€€ã€€new CleanWebpackPlugin()</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>æ¥ç€é€šè¿‡nodeåˆ†ædllä¸‹æœ‰å‡ ä¸ªdllæ–‡ä»¶ï¼Œæœ‰å‡ ä¸ªmainfest.jsonæ–‡ä»¶ã€‚ç„¶ååŠ¨æ€çš„å¾€pluginsé‡Œé¢æ·»åŠ è¿™ä¸ªAddAssetHtmlWebpackPluginå’ŒDllReferencePluginã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">// å¼•å…¥node fs</span><br><span class="line">const fs = require(<span class="string">'fs'</span>);</span><br><span class="line">// è¯»å–dllæ–‡ä»¶çš„æ‰€æœ‰æ–‡ä»¶å</span><br><span class="line">const files = fs.readdirSync(path.resolve(__dirname, <span class="string">'../dll'</span>));</span><br><span class="line">const plugins = [</span><br><span class="line">ã€€ã€€// HtmlWebpackPluginä¼šåœ¨æ‰“åŒ…ç»“æŸåï¼Œè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªhtmlæ–‡ä»¶ï¼Œå¹¶æŠŠæ‰“åŒ…ç”Ÿæˆçš„jsè‡ªåŠ¨å¼•å…¥åˆ°è¿™ä¸ªhtmlæ–‡ä»¶ä¸­</span><br><span class="line">ã€€ã€€new HtmlWebpackPlugin(&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€template: <span class="string">'src/index.html'</span></span><br><span class="line">ã€€ã€€&#125;),</span><br><span class="line">ã€€ã€€new CleanWebpackPlugin()</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">// è¯»å–dllæ–‡ä»¶çš„æ‰€æœ‰å†…å®¹</span><br><span class="line">const files = fs.readdirSync(path.resolve(__dirname, <span class="string">'../dll'</span>));</span><br><span class="line"></span><br><span class="line">files.forEach(file =&gt;&#123;</span><br><span class="line">ã€€ã€€// // filepathè¡¨ç¤ºè¦å¢åŠ åˆ°æ–‡ä»¶æ˜¯å“ªäº›</span><br><span class="line">ã€€ã€€<span class="keyword">if</span>(/.*\.dll.js/.<span class="built_in">test</span>(file)) &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€plugins.push(new AddAssetHtmlWebpackPlugin(&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€filepath: path.resolve(__dirname, <span class="string">'../dll'</span>, file)</span><br><span class="line">ã€€ã€€ã€€ã€€&#125;))</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">ã€€ã€€// /**</span><br><span class="line">ã€€ã€€// * ä½¿ç”¨è¿™ä¸ªæ’ä»¶ï¼Œå½“æ‰“åŒ…index.jsçš„æ—¶å€™ï¼Œä¼šå¼•å…¥ä¸€äº›ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œå½“å‘ç°ç¬¬ä¸‰æ–¹æ¨¡å—çš„æ—¶å€™ï¼Œä¼šå»mainfestå»æ‰¾æ˜ å°„å…³ç³»</span><br><span class="line">ã€€ã€€// * æ‰¾åˆ°å°±ä¸ç”¨å†é‡æ–°åˆ†ææ‰“åŒ…äº†ï¼Œå»vendorsè¿™ä¸ªå…¨å±€å˜é‡æ‰¾å°±å¥½äº†</span><br><span class="line">ã€€ã€€// * ä¸åœ¨ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œæ‰ä¼šå»åˆ†æ</span><br><span class="line">ã€€ã€€// */</span><br><span class="line">ã€€ã€€<span class="keyword">if</span>(/.*\.manifest.json/.<span class="built_in">test</span>(file))&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€plugins.push(new webpack.DllReferencePlugin(&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€manifest: path.resolve(__dirname, <span class="string">'../dll'</span>, file)</span><br><span class="line">ã€€ã€€ã€€ã€€&#125;))</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="æ§åˆ¶åŒ…æ–‡ä»¶å¤§å°-tree-shaking-splitChunks"><a href="#æ§åˆ¶åŒ…æ–‡ä»¶å¤§å°-tree-shaking-splitChunks" class="headerlink" title="æ§åˆ¶åŒ…æ–‡ä»¶å¤§å°(tree shaking, splitChunks)"></a>æ§åˆ¶åŒ…æ–‡ä»¶å¤§å°(tree shaking, splitChunks)</h2><h2 id="thread-loader-parallel-webpack-happypackå¤šè¿›ç¨‹æ‰“åŒ…"><a href="#thread-loader-parallel-webpack-happypackå¤šè¿›ç¨‹æ‰“åŒ…" class="headerlink" title="thread-loader,parallel-webpack,happypackå¤šè¿›ç¨‹æ‰“åŒ…"></a>thread-loader,parallel-webpack,happypackå¤šè¿›ç¨‹æ‰“åŒ…</h2><h2 id="åˆç†ä½¿ç”¨sourceMapï¼ŒsoureMapè¶Šè¯¦ç»†ï¼Œæ‰“åŒ…é€Ÿåº¦è¶Šæ…¢"><a href="#åˆç†ä½¿ç”¨sourceMapï¼ŒsoureMapè¶Šè¯¦ç»†ï¼Œæ‰“åŒ…é€Ÿåº¦è¶Šæ…¢" class="headerlink" title="åˆç†ä½¿ç”¨sourceMapï¼ŒsoureMapè¶Šè¯¦ç»†ï¼Œæ‰“åŒ…é€Ÿåº¦è¶Šæ…¢"></a>åˆç†ä½¿ç”¨sourceMapï¼ŒsoureMapè¶Šè¯¦ç»†ï¼Œæ‰“åŒ…é€Ÿåº¦è¶Šæ…¢</h2><h2 id="ç»“åˆstatsï¼Œæ‰“åŒ…åˆ†æå·¥å…·åˆ†ææ‰“åŒ…ç»“æœ"><a href="#ç»“åˆstatsï¼Œæ‰“åŒ…åˆ†æå·¥å…·åˆ†ææ‰“åŒ…ç»“æœ" class="headerlink" title="ç»“åˆstatsï¼Œæ‰“åŒ…åˆ†æå·¥å…·åˆ†ææ‰“åŒ…ç»“æœ"></a>ç»“åˆstatsï¼Œæ‰“åŒ…åˆ†æå·¥å…·åˆ†ææ‰“åŒ…ç»“æœ</h2><h2 id="å¼€å‘ç¯å¢ƒå†…å­˜ç¼–è¯‘-devServerï¼Œå†…å­˜çš„è¯»å–æ¯”ç¡¬ç›˜è¯»å–å¿«"><a href="#å¼€å‘ç¯å¢ƒå†…å­˜ç¼–è¯‘-devServerï¼Œå†…å­˜çš„è¯»å–æ¯”ç¡¬ç›˜è¯»å–å¿«" class="headerlink" title="å¼€å‘ç¯å¢ƒå†…å­˜ç¼–è¯‘(devServerï¼Œå†…å­˜çš„è¯»å–æ¯”ç¡¬ç›˜è¯»å–å¿«)"></a>å¼€å‘ç¯å¢ƒå†…å­˜ç¼–è¯‘(devServerï¼Œå†…å­˜çš„è¯»å–æ¯”ç¡¬ç›˜è¯»å–å¿«)</h2><h2 id="å¼€å‘ç¯å¢ƒæ— ç”¨æ’ä»¶å‰”é™¤ï¼ˆæ¯”å¦‚å¼€å‘ç¯å¢ƒï¼Œmodeä¸è¦ç”¨productionï¼‰"><a href="#å¼€å‘ç¯å¢ƒæ— ç”¨æ’ä»¶å‰”é™¤ï¼ˆæ¯”å¦‚å¼€å‘ç¯å¢ƒï¼Œmodeä¸è¦ç”¨productionï¼‰" class="headerlink" title="å¼€å‘ç¯å¢ƒæ— ç”¨æ’ä»¶å‰”é™¤ï¼ˆæ¯”å¦‚å¼€å‘ç¯å¢ƒï¼Œmodeä¸è¦ç”¨productionï¼‰"></a>å¼€å‘ç¯å¢ƒæ— ç”¨æ’ä»¶å‰”é™¤ï¼ˆæ¯”å¦‚å¼€å‘ç¯å¢ƒï¼Œmodeä¸è¦ç”¨productionï¼‰</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/28/webpackç³»åˆ—/22webpackä¸­ç¬¬ä¸‰æ–¹åº“libraryçš„æ‰“åŒ…/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qicainiao">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qicainiao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/28/webpackç³»åˆ—/22webpackä¸­ç¬¬ä¸‰æ–¹åº“libraryçš„æ‰“åŒ…/" itemprop="url">webpackç³»åˆ—-22webpackä¸­ç¬¬ä¸‰æ–¹åº“libraryçš„æ‰“åŒ…</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-08-28T18:33:41+08:00">
                2019-08-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/webpackç³»åˆ—/" itemprop="url" rel="index">
                    <span itemprop="name">webpackç³»åˆ—</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä¹‹å‰éƒ½æ˜¯å¯¹è‡ªå·±å†™çš„ä¸šåŠ¡ä»£ç è¿›è¡Œæ‰“åŒ…ï¼Œä½†å‡è®¾æˆ‘ä»¬è¦å¼€å‘ä¸€ä¸ªåº“ï¼Œè¿™æ ·çš„åº“ä»£ç å¦‚ä½•ç”¨webpackè¿›è¡Œæ‰“åŒ…å‘¢ï¼Œé¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªéå¸¸ç®€å•çš„å‡½æ•°åº“</p>
<p>é¦–å…ˆæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹libraryï¼Œè¿è¡Œnpm init -yï¼Œå¾—åˆ°ä¸€ä¸ªpackage.json<br>package.json</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">ã€€ã€€<span class="string">"name"</span>: <span class="string">"library"</span>,</span><br><span class="line">ã€€ã€€<span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">ã€€ã€€<span class="string">"description"</span>: <span class="string">""</span>,</span><br><span class="line">ã€€ã€€<span class="string">"main"</span>: <span class="string">"index.js"</span>,</span><br><span class="line">ã€€ã€€<span class="string">"scripts"</span>: &#123;</span><br><span class="line">ã€€ã€€&#125;,</span><br><span class="line">ã€€ã€€<span class="string">"keywords"</span>: [],</span><br><span class="line">ã€€ã€€<span class="string">"author"</span>: <span class="string">""</span>,</span><br><span class="line">ã€€ã€€<span class="string">"license"</span>: <span class="string">"MIT"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶ålibraryä¸‹æ–°å»ºä¸€ä¸ªsrc,é‡Œé¢å»ºä¸‰ä¸ªæ–‡ä»¶,math.js,string.js,index.js</p>
<p>math.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> <span class="keyword">function</span> add(a,b) &#123;</span><br><span class="line">ã€€ã€€<span class="built_in">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> <span class="keyword">function</span> minus(a,b) &#123;</span><br><span class="line">ã€€ã€€<span class="built_in">return</span> a - b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> <span class="keyword">function</span> cheng(a,b) &#123;</span><br><span class="line">ã€€ã€€<span class="built_in">return</span> a * b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> <span class="keyword">function</span> chu(a,b) &#123;</span><br><span class="line">ã€€ã€€<span class="built_in">return</span> a / b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>string.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> <span class="keyword">function</span> join(a, b)&#123;</span><br><span class="line">ã€€ã€€<span class="built_in">return</span> a + <span class="string">''</span> + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>index.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import * as math from <span class="string">'./math'</span>;</span><br><span class="line">import * as string from <span class="string">'./string'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> default &#123; math, string &#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå®‰è£…webpack</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack webpack-cli --save</span><br></pre></td></tr></table></figure>

<p>æ–°å»ºé…ç½®æ–‡ä»¶ webpack.config.js<br>webpack.config.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const path = require(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">ã€€ã€€mode: <span class="string">'production'</span>,</span><br><span class="line">ã€€ã€€entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">ã€€ã€€output: &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">ã€€ã€€ã€€ã€€filename: <span class="string">'library.js'</span></span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>package.jsoné‡Œé¢é…ç½®script</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">ã€€ã€€<span class="string">"build"</span>: <span class="string">"webpack"</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>ç„¶åè¿è¡Œ npm run buildã€‚ç”Ÿæˆä¸€ä¸ªdistæ–‡ä»¶å¤¹ï¼Œé‡Œé¢ç”Ÿæˆäº†ä¸€ä¸ªlibrary.jsã€‚å¦‚æœæ˜¯æˆ‘ä»¬ä¸šåŠ¡ä»£ç ï¼Œå°±å¥½äº†ã€‚ä½†æ˜¯æˆ‘ä»¬ç”Ÿæˆçš„æ˜¯ä¸€ä¸ªåº“ï¼Œç»™åˆ«äººç”¨çš„ï¼Œé‚£ä¹ˆåˆ«äººæ€ä¹ˆç”¨å‘¢</p>
<p>ç¬¬ä¸€ç§</p>
<p>import library from â€˜libraryâ€™;<br>ç¬¬äºŒç§<br>const library = require(â€˜libraryâ€™);<br>ç¬¬ä¸‰ç§</p>
<p>require([â€˜libraryâ€™],function() {<br>})<br>å¦‚æœæˆ‘ä»¬çš„åº“æƒ³å¤–é¢å¯ä»¥è¢«è¿™æ ·å¼•ç”¨ã€‚å¯ä»¥åšä¸€ä¸ªé…ç½®,webpack.config.jsé‡Œé¢outputå¤šåŠ ä¸€ä¸ªå‚æ•°<br>webpack.config.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const path = require(<span class="string">'path'</span>);</span><br><span class="line">module.exports = &#123;</span><br><span class="line">ã€€ã€€mode: <span class="string">'production'</span>,</span><br><span class="line">ã€€ã€€entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">ã€€ã€€output: &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">ã€€ã€€ã€€ã€€filename: <span class="string">'library.js'</span>,</span><br><span class="line">ã€€ã€€ã€€ã€€// é€šè¿‡ä»»ä½•å½¢å¼ï¼Œéƒ½å¯ä»¥å¼•ç”¨çš„åˆ°</span><br><span class="line">ã€€ã€€ã€€ã€€libraryTarget: <span class="string">'umd'</span></span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é™¤äº†è¿™ç§å¼•ç”¨ä¹‹å¤–ï¼Œæˆ‘è¿˜å¸Œæœ›åˆ«äººé€šè¿‡å¼•ç”¨srciptåï¼Œå¯ä»¥é€šè¿‡å…¨å±€å˜é‡æ¥ä½¿ç”¨è¿™ä¸ªåº“</p>
<script src="library.js"></script>
<p>library.add();<br>å†é…ç½®ä¸€ä¸‹webpack.config.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const path = require(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">ã€€ã€€mode: <span class="string">'production'</span>,</span><br><span class="line">ã€€ã€€entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">ã€€ã€€output: &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">ã€€ã€€ã€€ã€€filename: <span class="string">'library.js'</span>,</span><br><span class="line">ã€€ã€€ã€€ã€€// æ‰“åŒ…ç”Ÿæˆçš„ä»£ç æŒ‚è½½åˆ°é¡µé¢åˆ°ä¸€ä¸ªå…¨å±€å˜é‡ä¸Š</span><br><span class="line">ã€€ã€€ã€€ã€€library: <span class="string">'library'</span>,</span><br><span class="line">ã€€ã€€ã€€ã€€// é€šè¿‡ä»»ä½•å½¢å¼ï¼Œéƒ½å¯ä»¥å¼•ç”¨çš„åˆ°</span><br><span class="line">ã€€ã€€ã€€ã€€libraryTarget: <span class="string">'umd'</span></span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥æˆ‘ä»¬åšä¸€ä¸ªæµ‹è¯•ï¼Œåœ¨ç”Ÿæˆå¥½çš„distç›®å½•ä¸‹æ–°å»ºindex.html</p>
<p>index.html</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">ã€€ã€€&lt;head&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€&lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€&lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"ie=edge"</span>&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€&lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€&lt;script src=<span class="string">"./library.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">ã€€ã€€&lt;/head&gt;</span><br><span class="line">ã€€ã€€&lt;body&gt;</span><br><span class="line">ã€€ã€€&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>ç„¶åè¿è¡Œè¿™ä¸ªé¡µé¢ï¼Œæ§åˆ¶å°è°ƒç”¨library;</p>
<p>é™¤äº†åœ¨æ‰“åŒ…åº“çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦é¢å¤–çš„é…ç½®è¿™ä¸¤ä¸ªå‚æ•°ä¹‹å¤–å‘¢ï¼Œæˆ‘ä»¬è¿˜è¦åšä¸€ä»¶äº‹æƒ…ã€‚æ¯”å¦‚string.js<br>string.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> <span class="keyword">function</span> join(a, b)&#123;</span><br><span class="line">ã€€ã€€<span class="built_in">return</span> a + <span class="string">''</span> + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨å†™çš„æ—¶å€™å‘ç°lodashé‡Œé¢æœ‰ä¸ªåŠŸèƒ½å¾ˆå¥½</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install lodash --save</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import _ from <span class="string">'lodash'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> <span class="keyword">function</span> join(a, b)&#123;</span><br><span class="line">ã€€ã€€<span class="built_in">return</span> _.join([a,b], <span class="string">' '</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åç°åœ¨çœ‹èµ·æ¥æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯åˆ«äººä½¿ç”¨æˆ‘ä»¬çš„åº“çš„æ—¶å€™ï¼Œä»–ä¹Ÿæœ‰å¯èƒ½é‡æ–°ä½¿ç”¨äº†lodashã€‚è¿™å°±å¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çš„åº“é‡Œé¢æ‰“åŒ…äº†ä¸€æ¬¡lodashï¼Œç”¨æˆ·çš„ä¸šåŠ¡ä»£ç é‡Œé¢åˆæ‰“åŒ…äº†ä¸€æ¬¡lodashã€‚æ‰€ä»¥ç”¨æˆ·çš„ä¸šåŠ¡ä»£ç é‡Œé¢å°±å®¹æ˜“å­˜åœ¨ä¸¤ä»½lodashä»£ç ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨åº“é‡Œé¢åšä¸€ä¸ªå¦å¤–çš„é…ç½®ï¼Œexternals</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const path = require(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">ã€€ã€€mode: <span class="string">'production'</span>,</span><br><span class="line">ã€€ã€€entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">ã€€ã€€// å¦‚æœæ‰“åŒ…è¿‡ç¨‹ä¸­é‡åˆ°lodashï¼Œå°±å¿½ç•¥è¿™ä¸ªåº“ï¼Œä¸è¦æ‰“åŒ…åˆ°ä»£ç é‡Œé¢å»</span><br><span class="line">ã€€ã€€externals: [<span class="string">'lodash'</span>],</span><br><span class="line">ã€€ã€€output: &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">ã€€ã€€ã€€ã€€filename: <span class="string">'library.js'</span>,</span><br><span class="line">ã€€ã€€ã€€ã€€// æ‰“åŒ…ç”Ÿæˆçš„ä»£ç æŒ‚è½½åˆ°é¡µé¢åˆ°ä¸€ä¸ªå…¨å±€å˜é‡ä¸Š</span><br><span class="line">ã€€ã€€ã€€ã€€library: <span class="string">'library'</span>,</span><br><span class="line">ã€€ã€€ã€€ã€€// é€šè¿‡ä»»ä½•å½¢å¼ï¼Œéƒ½å¯ä»¥å¼•ç”¨çš„åˆ°</span><br><span class="line">ã€€ã€€ã€€ã€€libraryTarget: <span class="string">'umd'</span></span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ—¶å€™å¤–é¢ç›´æ¥ä½¿ç”¨libraryå°±ä¸å¯ä»¥äº†ï¼Œå› ä¸ºåº“é‡Œé¢è¦ç”¨lodashã€‚æ‰€ä»¥åœ¨ç”¨è¿™ä¸ªåº“çš„æ—¶å€™ï¼Œä¸šåŠ¡ä»£ç é‡Œé¢è¦å¦å¤–å¼•å…¥lodashã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬çœ‹ä¸‹externalsçš„ä½œç”¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">externals : &#123;</span><br><span class="line">ã€€ã€€lodash : &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€commonjs: <span class="string">'lodash'</span>,</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ„æ€æ˜¯ã€‚å¦‚æœlodashè¿™ä¸ªåº“åœ¨commonjsç¯å¢ƒä¸‹è¢«ä½¿ç”¨ï¼ŒlodashåŠ è½½çš„æ—¶å€™ï¼Œåå­—å¿…é¡»æ˜¯lodash</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const lodash = require(<span class="string">'lodash'</span>);</span><br><span class="line"></span><br><span class="line">externals : &#123;</span><br><span class="line">ã€€ã€€lodash : &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€root: <span class="string">'_'</span>,</span><br><span class="line">ã€€ã€€ã€€ã€€commonjs: <span class="string">'lodash'</span>,</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ—¶å€™åŠ ä¸€ä¸ªrootã€‚è¿™ä¸ªæ„æ€æ˜¯å¦‚æœæ—¢ä¸ä½¿ç”¨commonjsï¼Œä¹Ÿä¸ä½¿ç”¨es moduleã€‚æ›´ä¸ç”¨amdå½¢å¼å»å¼•å…¥lodashã€‚è¿™ä¸ªlodashæ˜¯é€šè¿‡jså¼•å…¥çš„ï¼Œè¿™é‡Œè¦æ±‚è¿™ä¸ªscriptæ ‡ç­¾å¿…é¡»æ³¨å…¥ä¸€ä¸ªå«åšâ€™_â€™çš„å…¨å±€å˜é‡ã€‚ä½†æ˜¯ä¸€èˆ¬æ¥è¯´æ²¡æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œç›´æ¥é…ç½®æˆ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">externals : &#123;</span><br><span class="line">ã€€ã€€lodash :<span class="string">'lodash'</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>å°±å¯ä»¥äº†ï¼Œä»–çš„æ„æ€æ˜¯ä¸ç®¡ä»»ä½•ç¯å¢ƒä¸‹ï¼Œå¼•å…¥lodashéƒ½å«åšlodashã€‚</p>
<p>æœ€ç»ˆæˆ‘ä»¬ç»™åˆ«äººä½¿ç”¨çš„æ˜¯æœ€åçš„library,é‚£æ€ä¹ˆæ ·è®©åˆ«äººæ–¹ä¾¿çš„ä½¿ç”¨åˆ°å‘¢ï¼Ÿ<br>é¦–å…ˆæŠŠpackage.jsoné‡Œé¢çš„å…¥å£æ–‡ä»¶é…ç½®æ”¹æˆ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"main"</span>: <span class="string">"./dist/library.js"</span>,</span><br></pre></td></tr></table></figure>

<p>ç„¶ånpmé‡Œé¢æ³¨å†Œä¸€ä¸ªè´¦å·ã€‚ç™»å½•ååœ¨å‘½ä»¤è¡Œè¾“å…¥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm adduser</span><br></pre></td></tr></table></figure>

<p>è¾“å…¥è´¦å·å¯†ç åï¼Œç›´æ¥è¾“å…¥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure>

<p>æˆåŠŸåï¼Œåˆ«äººåˆ©ç”¨npm install libraryå°±å¯ä»¥ç”¨ä½ çš„äº†</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/28/webpackç³»åˆ—/21webpackä¸­ç¯å¢ƒå˜é‡çš„ä½¿ç”¨æ–¹æ³•/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qicainiao">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qicainiao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/28/webpackç³»åˆ—/21webpackä¸­ç¯å¢ƒå˜é‡çš„ä½¿ç”¨æ–¹æ³•/" itemprop="url">webpackç³»åˆ—-21webpackä¸­ç¯å¢ƒå˜é‡çš„ä½¿ç”¨æ–¹æ³•</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-08-28T18:31:00+08:00">
                2019-08-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/webpackç³»åˆ—/" itemprop="url" rel="index">
                    <span itemprop="name">webpackç³»åˆ—</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>åœ¨webpackæ‰“åŒ…è¿‡ç¨‹ä¸­ï¼Œæ€ä¹ˆå»ä½¿ç”¨ä¸€äº›ç¯å¢ƒå˜é‡ã€‚<br>é¦–å…ˆæˆ‘æœ‰ä¸€ä¸ªæ‰“åŒ…é…ç½®çš„ä¸‰ä¸ªæ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">ã€€ã€€<span class="string">"dev-build"</span>: <span class="string">"webpack --profile --json &gt; stats.json --config ./build/webpack.dev.js"</span>,</span><br><span class="line">ã€€ã€€<span class="string">"dev"</span>: <span class="string">"webpack-dev-server --config ./build/webpack.dev.js"</span>,</span><br><span class="line">ã€€ã€€<span class="string">"build"</span>: <span class="string">"webpack --config ./build/webpack.prod.js"</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>å¯¹åº”ä¸‰ä¸ªå‘½ä»¤ï¼Œåˆ†åˆ«æ˜¯å¼€å‘ç¯å¢ƒçš„ä¸€ä¸ªå‘½ä»¤ npm run devã€‚æ‰“åŒ…ç”Ÿæˆå¼€å‘ç¯å¢ƒä»£ç çš„å‘½ä»¤ npm run dev-buildã€‚ä»¥åŠçº¿ä¸Šä»£ç ç”Ÿæˆçš„ä¸€ä¸ªå‘½ä»¤ npm run buildã€‚ç°åœ¨æˆ‘è¦å€ŸåŠ©ä¸¤ä¸ªé…ç½®æ–‡ä»¶æ¥å¸®åŠ©æˆ‘ä»¬å»å®Œæˆå¯¹åº”çš„æ‰“åŒ…ï¼Œåˆ†åˆ«æ˜¯devå¯¹åº”é…ç½®æ–‡ä»¶å’Œprodå¯¹åº”çš„é…ç½®æ–‡ä»¶ã€‚ç°åœ¨æˆ‘å¯ä»¥é€šè¿‡å¦å¤–ä¸€ç§å½¢å¼æ¥å¯¹ä»£ç è¿›è¡Œä¸€æ¬¡å˜æ›´ã€‚</p>
<p>webpack.dev.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">const webpack = require(<span class="string">'webpack'</span>);</span><br><span class="line">const merge = require(<span class="string">'webpack-merge'</span>);</span><br><span class="line">const commonConfig = require(<span class="string">'./webpack.common.js'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const devConfig = &#123;ã€€ã€€</span><br><span class="line">ã€€ã€€mode: <span class="string">'development'</span>,</span><br><span class="line">ã€€ã€€devtool: <span class="string">'cheap-module-eval-source-map'</span>,</span><br><span class="line">ã€€ã€€devServer: &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€contentBase:<span class="string">'./dist'</span>,</span><br><span class="line">ã€€ã€€ã€€ã€€open:<span class="literal">true</span>,</span><br><span class="line">ã€€ã€€ã€€ã€€hot: <span class="literal">true</span></span><br><span class="line">ã€€ã€€&#125;,</span><br><span class="line">ã€€ã€€plugins: [</span><br><span class="line">ã€€ã€€ã€€ã€€new webpack.HotModuleReplacementPlugin()</span><br><span class="line">ã€€ã€€],</span><br><span class="line">ã€€ã€€output: &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€filename: <span class="string">'[name].js'</span>,</span><br><span class="line">ã€€ã€€ã€€ã€€chunkFilename: <span class="string">'[name].chunk.js'</span>,</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br><span class="line">module.exports = merge(commonConfig, devConfig);</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯devé…ç½®åŸå§‹æ–‡ä»¶ï¼Œå…¶ä¸­å¼•å…¥äº†mergeå’ŒcommonConfigã€‚ç°åœ¨æˆ‘æŠŠä»–åˆ æ‰ï¼Œç›´æ¥å¯¼å‡ºdevConfig</p>
<p>webpack.dev.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const webpack = require(<span class="string">'webpack'</span>);</span><br><span class="line">const devConfig = &#123;</span><br><span class="line">&#125;</span><br><span class="line">module.exports = devConfig;</span><br></pre></td></tr></table></figure>

<p>prodä¹ŸåšåŒæ ·çš„å¤„ç†ï¼Œè¿™æ ·æˆ‘å¯¼å‡ºçš„å°±ä¸æ˜¯èåˆè¿‡åçš„æ–‡ä»¶ã€‚è€Œæ˜¯è‡ªå·±ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ã€‚æ¥ç€æˆ‘ä»¬æ‰“å¼€webpack.common.jsï¼Œå»å¼•å…¥mergeï¼Œdevå’Œprod</p>
<p>webpack.common.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">const path = require(<span class="string">'path'</span>);</span><br><span class="line">const HtmlWebpackPlugin = require(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line">const CleanWebpackPlugin = require(<span class="string">'clean-webpack-plugin'</span>);</span><br><span class="line">const webpack = require(<span class="string">'webpack'</span>);</span><br><span class="line">const merge = require(<span class="string">'webpack-merge'</span>);</span><br><span class="line">const devConfig = require(<span class="string">'./webpack.dev'</span>);</span><br><span class="line">const prodConfig = require(<span class="string">'./webpack.prod'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const commonConfig = &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">module.exports = (env) =&gt; &#123;</span><br><span class="line">ã€€ã€€// å¦‚æœæœ‰è¿™ä¸ªå…¨å±€å˜é‡ï¼Œä¸”æ˜¯çº¿ä¸Šç¯å¢ƒï¼Œå¦åˆ™æ˜¯å¼€å‘ç¯å¢ƒ</span><br><span class="line">ã€€ã€€<span class="keyword">if</span>(env &amp;&amp; env.production) &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="built_in">return</span> merge(commonConfig, prodConfig);</span><br><span class="line">ã€€ã€€&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="built_in">return</span> merge(commonConfig, devConfig);</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥å‰æˆ‘ä»¬å¯¼å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™é‡Œæˆ‘ä»¬å¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæ€ä¹ˆèåˆå–å†³äºä¼ é€’è¿›æ¥çš„å˜é‡ã€‚æ˜¯å¦æœ‰å…¨å±€å˜é‡ï¼Œæ˜¯å“ªä¸ªç¯å¢ƒå†³å®š</p>
<p>package.json</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">ã€€ã€€<span class="string">"dev-build"</span>: <span class="string">"webpack --profile --json &gt; stats.json --config ./build/webpack.common.js"</span>,</span><br><span class="line">ã€€ã€€<span class="string">"dev"</span>: <span class="string">"webpack-dev-server --config ./build/webpack.common.js"</span>,</span><br><span class="line">ã€€ã€€<span class="string">"build"</span>: <span class="string">"webpack --env.production --config ./build/webpack.common.js"</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>package.jsoné‡Œé¢èµ°çš„éƒ½æ˜¯webpack.common.jsäº†ã€‚åœ¨buildé‡Œé¢åŠ å…¥â€“env.productionã€‚å…¶ä»–ä¸åŠ é»˜è®¤èµ°devConfigã€‚å„è‡ªè¿è¡Œã€‚æ²¡é—®é¢˜ã€‚è¿™æ ·å°±ä¸æ˜¯é€šè¿‡ä¸åŒçš„æ–‡ä»¶ï¼Œè€Œæ˜¯éƒ½æ˜¯èµ°commonï¼Œé€šè¿‡å˜é‡æ§åˆ¶</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/28/webpackç³»åˆ—/19webpackä¸æµè§ˆå™¨ç¼“å­˜ï¼Œå¦‚æœæ–‡ä»¶æ²¡æœ‰åŠ¨æ‰“åŒ…hashé‚£ä¹ˆä¸å˜/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qicainiao">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qicainiao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/28/webpackç³»åˆ—/19webpackä¸æµè§ˆå™¨ç¼“å­˜ï¼Œå¦‚æœæ–‡ä»¶æ²¡æœ‰åŠ¨æ‰“åŒ…hashé‚£ä¹ˆä¸å˜/" itemprop="url">webpackç³»åˆ—-19webpackä¸æµè§ˆå™¨ç¼“å­˜</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-08-28T17:56:01+08:00">
                2019-08-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/webpackç³»åˆ—/" itemprop="url" rel="index">
                    <span itemprop="name">webpackç³»åˆ—</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æ ¹æ®ä¹‹å‰çš„é…ç½®ï¼Œå‡è®¾æ–‡ä»¶ä¸Šä¼ è‡³æœåŠ¡å™¨ä¸­ï¼Œæ²¡æœ‰åŠ hashï¼Œå¦‚æœé¡µé¢å†…å®¹æœ‰æ›´æ”¹ï¼Œæµè§ˆå™¨åˆ·æ–°çš„æ—¶å€™ï¼Œè¯·æ±‚çš„è¿˜æ˜¯åŸå…ˆçš„æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯æµè§ˆå™¨çš„ç¼“å­˜ï¼Œå› ä¸ºåå­—æ²¡æœ‰å˜ã€‚ç°åœ¨æˆ‘ä»¬åœ¨ä¸Šçº¿çš„webpacké…ç½®ä¸­åŠ ä¸Šhash</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">output:&#123;</span><br><span class="line">ã€€ã€€filename: <span class="string">'[name].[contenthash].js'</span>,</span><br><span class="line">ã€€ã€€chunkFilename: <span class="string">'[name].[contenthash].js'</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ—¶å€™æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶å°±æœ‰äº†hashå€¼ã€‚åªè¦æ–‡ä»¶å†…å®¹ä¸å˜ï¼Œhashå€¼å°±ä¸å˜ï¼Œå†…å®¹å˜äº†æ‰å˜ã€‚</p>
<p>å¦‚æœæ‰“åŒ…å¤±æ•ˆï¼Œæ¯”å¦‚è€ç‰ˆæœ¬çš„webpack4ã€‚è¿™ä¸ªæ—¶å€™åŠ ä¸€ä¸ªé…ç½®å‚æ•°</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">optimization:&#123;</span><br><span class="line">ã€€ã€€runtimeChunk: &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€name: <span class="string">'runtime'</span></span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/28/webpackç³»åˆ—/18webpackä¸­cssæ–‡ä»¶çš„ä»£ç åˆ†å‰²å’Œå‹ç¼©/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qicainiao">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qicainiao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/28/webpackç³»åˆ—/18webpackä¸­cssæ–‡ä»¶çš„ä»£ç åˆ†å‰²å’Œå‹ç¼©/" itemprop="url">webpackç³»åˆ—-18webpackä¸­cssæ–‡ä»¶çš„ä»£ç åˆ†å‰²</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-08-28T17:47:20+08:00">
                2019-08-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/webpackç³»åˆ—/" itemprop="url" rel="index">
                    <span itemprop="name">webpackç³»åˆ—</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">ã€€ã€€output: &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€filename: <span class="string">'[name].js'</span>,</span><br><span class="line">ã€€ã€€ã€€ã€€chunkFilename: <span class="string">'[name].chunk.js'</span>,</span><br><span class="line">ã€€ã€€ã€€ã€€path: path.resolve(__dirname, <span class="string">'../dist'</span>)</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨çœ‹åˆ«äººå†™çš„webpackï¼Œoutputé…ç½®é¡¹ï¼Œè‚¯è·Ÿä¼šç¢°åˆ°chunkFilenameè¿™æ ·çš„é…ç½®é¡¹ï¼Œé‚£è¿™ä¸ªæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿfilenameå’ŒchunkFilenameæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿé¦–å…ˆçœ‹ä¸ªä¾‹å­</p>
<p>index.html</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">ã€€ã€€&lt;head&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€&lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€&lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"ie=edge"</span>&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€&lt;title&gt;html template&lt;/title&gt;</span><br><span class="line">ã€€ã€€&lt;/head&gt;</span><br><span class="line">ã€€ã€€&lt;body&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€&lt;div id=<span class="string">'root'</span>&gt;&lt;/div&gt;</span><br><span class="line">ã€€ã€€&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>index.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">async <span class="keyword">function</span> <span class="function"><span class="title">getComponent</span></span>() &#123;</span><br><span class="line">ã€€ã€€const &#123; default: _ &#125; = await import(/* webpackChunkName:<span class="string">'lodash'</span> */<span class="string">'lodash'</span>);</span><br><span class="line">ã€€ã€€const element = document.createElement(<span class="string">'div'</span>);</span><br><span class="line">ã€€ã€€element.innerHTML = _.join([<span class="string">'1'</span>, <span class="string">'2'</span>], <span class="string">'-'</span>);</span><br><span class="line">ã€€ã€€<span class="built_in">return</span> element</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">document.addEventListener(<span class="string">'click'</span>, ()=&gt; &#123;</span><br><span class="line">ã€€ã€€getComponent().<span class="keyword">then</span>( element =&gt;&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€document.body.appendChild(element);</span><br><span class="line">ã€€ã€€&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>webpack.common.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">ã€€ã€€entry: &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€main: <span class="string">'./src/index.js'</span></span><br><span class="line">ã€€ã€€&#125;,</span><br><span class="line">ã€€ã€€output: &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€filename: <span class="string">'[name].js'</span>,</span><br><span class="line">ã€€ã€€ã€€ã€€chunkFilename: <span class="string">'[name].chunk.js'</span>,</span><br><span class="line">ã€€ã€€ã€€ã€€path: path.resolve(__dirname, <span class="string">'../dist'</span>)</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œnpm run dev-buildæ‰“åŒ…ã€‚æ‰“å¼€distç›®å½•ï¼Œå‘ç°ç¬¬ä¸‰æ–¹æ¨¡å—æ‰“åŒ…å¥½çš„åå­—å«vendors<del>lodash.chunk.jsï¼Œä¸å†æ˜¯ä¹‹å‰çš„vendors</del>lodash.jsã€‚æˆ‘ä»¬çš„å…¥å£æ–‡ä»¶å¯¹åº”çš„éƒ½æ˜¯filenameçš„è¾“å‡ºã€‚å¦‚æœä¸æ˜¯å…¥å£æ–‡ä»¶ï¼Œæ˜¯å¼‚æ­¥å¼•å…¥æˆ–è€…é—´æ¥äº§ç”Ÿçš„jsæ–‡ä»¶ï¼Œä»–å°±ä¼šèµ°chunkFilenameè¿™ä¸ªè¾“å‡ºçš„é…ç½®å‚æ•°ã€‚</p>
<p>æ¥ä¸‹æ¥è¿›å…¥ä¸»é¢˜ï¼Œcssä»£ç çš„åˆ†å‰²<br>index.html</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">ã€€ã€€&lt;head&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€&lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€&lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"ie=edge"</span>&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€&lt;title&gt;html template&lt;/title&gt;</span><br><span class="line">ã€€ã€€&lt;/head&gt;</span><br><span class="line">ã€€ã€€&lt;body&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€&lt;div id=<span class="string">'root'</span>&gt;&lt;/div&gt;</span><br><span class="line">ã€€ã€€&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>index.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import <span class="string">'./style.css'</span>;</span><br><span class="line">console.log(<span class="string">' hello world '</span>);</span><br></pre></td></tr></table></figure>

<p>style.css</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">body&#123;</span><br><span class="line">ã€€ã€€background: <span class="comment">#abcdef;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œnpm run dev-buildã€‚å‘ç°æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶åªæœ‰main.js å’Œ vendors~main.chunk.jsã€‚ä½†æ˜¯æµè§ˆå™¨æ‰“å¼€index.htmlã€‚èƒŒæ™¯å·²ç»æœ‰äº†ã€‚è¿™æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿwebpackåœ¨åšcssçš„æ‰“åŒ…çš„æ—¶å€™ï¼Œä¼šç›´æ¥æ‰“åŒ…åˆ°jsé‡Œé¢</p>
<p>å¦‚æœæˆ‘å¸Œæœ›åœ¨æ‰“åŒ…ç”Ÿæˆä»£ç çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘å¼•å…¥äº†cssæ–‡ä»¶ï¼Œé‚£ä¹ˆæŠŠcssæ–‡ä»¶æ‰“åŒ…åˆ°distç›®å½•ä¸‹ã€‚è€Œä¸æ˜¯ç›´æ¥å¼•å…¥åˆ°jsæ–‡ä»¶é‡Œé¢ã€‚é‚£ä¹ˆå°±éœ€è¦å¼•å…¥ä¸€ä¸ªæ’ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://webpack.js.org/plugins/mini-css-extract-plugin</span><br><span class="line"></span><br><span class="line">npm install --save-dev mini-css-extract-plugin</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ’ä»¶å¯ä»¥å¯¹cssè¿›è¡Œä»£ç åˆ†å‰²ã€‚è¿™ä¸ªæ’ä»¶ä¸é€‚åˆå¼€å‘ç¯å¢ƒï¼Œå› ä¸ºå®˜ç½‘è¯´äº†ï¼Œè¿™ä¸ªæ’ä»¶ç°åœ¨è¿˜æš‚æ—¶ä¸æ”¯æŒçƒ­æ›´æ–°ã€‚</p>
<p>å®‰è£…å¥½ä¹‹åçœ‹æ€ä¹ˆä½¿ç”¨ï¼Œé¦–å…ˆè¦åœ¨webpackä¸­å¼•å…¥è¿™ä¸ªæ’ä»¶ã€‚é¦–å…ˆæ‰“å¼€çº¿ä¸Šé…ç½®æ–‡ä»¶</p>
<p>webpack.prod.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">const merge = require(&apos;webpack-merge&apos;);</span><br><span class="line">const commonConfig = require(&apos;./webpack.common.js&apos;);</span><br><span class="line">const MiniCssExtractPlugin = require(&apos;mini-css-extract-plugin&apos;);</span><br><span class="line"></span><br><span class="line">const prodConfig = &#123;</span><br><span class="line">ã€€ã€€mode: &apos;production&apos;,</span><br><span class="line">ã€€ã€€devtool: &apos;cheap-module-source-map&apos;,</span><br><span class="line">ã€€ã€€module: &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€rules:[&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€test: /\.scss$/,</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€use: [</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€MiniCssExtractPlugin.loader,</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€loader: &apos;css-loader&apos;,</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€options: &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€importLoaders: 2</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€&#125;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€&#125;,</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€&apos;sass-loader&apos;,</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€&apos;postcss-loader&apos;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€]</span><br><span class="line">ã€€ã€€ã€€ã€€&#125;,&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€test: /\.css$/,</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€use: [</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€MiniCssExtractPlugin.loader,</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€&apos;css-loader&apos;,</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€&apos;postcss-loader&apos;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€]</span><br><span class="line">ã€€ã€€ã€€ã€€&#125;]</span><br><span class="line">ã€€ã€€&#125;,</span><br><span class="line">ã€€ã€€plugins:[</span><br><span class="line">ã€€ã€€ã€€ã€€new MiniCssExtractPlugin(&#123;&#125;)</span><br><span class="line">ã€€ã€€]</span><br><span class="line">&#125;</span><br><span class="line">module.exports = merge(commonConfig, prodConfig);</span><br></pre></td></tr></table></figure>

<p>ç„¶åå¯¹åº”åˆ°webpack.common.jsé‡Œé¢åˆ é™¤css,scssç›¸å…³åˆ°é…ç½®ã€‚è¿è¡Œnpm run buildã€‚å‘ç°å¤šå‡ºäº†ä¸¤ä¸ªæ–‡ä»¶main.css å’Œ main.css.map</p>
<p>cssæ‰“åŒ…å¥½åï¼Œæ˜¯æœªå‹ç¼©çš„ï¼Œè¦å°†æ‰“åŒ…å¥½çš„cssè¿›è¡Œå‹ç¼©ï¼Œå®‰è£…ï¼Œoptimize-css-assets-webpack-plugin</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install optimize-css-assets-webpack-plugin -D</span><br></pre></td></tr></table></figure>

<p>åœ¨webpack.props.jså¼•å…¥å¹¶é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const OptimizeCSSAssetsPlugin = require(&apos;optimize-css-assets-webpack-plugin&apos;);</span><br><span class="line">ã€€ã€€module.exports = &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€optimization: &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€minimizer: [new OptimizeCSSAssetsPlugin(&#123;&#125;)],</span><br><span class="line">ã€€ã€€ã€€ã€€&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œ npm run buildã€‚ä¼šå‘ç°cssæ–‡ä»¶è¢«è‡ªåŠ¨çš„åˆå¹¶å‹ç¼©ã€‚</p>
<p>è¿˜æœ‰æ›´é«˜çº§çš„ç”¨æ³•ï¼Œ å‡è®¾æœ‰å¾ˆå¤šä¸ªcssï¼Œè¦æ‰“åŒ…åˆ°ä¸€ä¸ªcssæ–‡ä»¶é‡Œé¢</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://webpack.js.org/plugins/mini-css-extract-plugin</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥å®ç°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">optimization: &#123;</span><br><span class="line">ã€€ã€€splitChunks: &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€cacheGroups: &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€styles: &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€name: &apos;styles&apos;,</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€test: /\.css$/,</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€chunks: &apos;all&apos;,</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€enforce: true, // å¿½ç•¥åˆ°å‰é¢åˆ°é…ç½®ï¼Œä¸ç®¡æ˜¯minSize,maxSizeç­‰ç­‰ï¼Œåªè¦æ˜¯cssï¼Œéƒ½æ‰“åŒ…åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€&#125;,</span><br><span class="line">ã€€ã€€ã€€ã€€&#125;,</span><br><span class="line">ã€€ã€€&#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/28/webpackç³»åˆ—/18webpackæ‰“åŒ…åˆ†æï¼Œpreloading,prefetchingçš„ä½¿ç”¨/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qicainiao">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qicainiao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/28/webpackç³»åˆ—/18webpackæ‰“åŒ…åˆ†æï¼Œpreloading,prefetchingçš„ä½¿ç”¨/" itemprop="url">webpackç³»åˆ—-18webpackæ‰“åŒ…åˆ†æï¼Œpreloading,prefetchingçš„ä½¿ç”¨</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-08-28T15:58:30+08:00">
                2019-08-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/webpackç³»åˆ—/" itemprop="url" rel="index">
                    <span itemprop="name">webpackç³»åˆ—</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æ‰“åŒ…åˆ†æï¼šå½“æˆ‘ä»¬ä½¿ç”¨webpackè¿›è¡Œæ‰“åŒ…ä¹‹åå‘¢ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©webpackçš„ä¸€äº›æ‰“åŒ…å·¥å…·è¿›è¡Œä¸€å®šçš„åˆ†æï¼Œç„¶åçœ‹ä¸€ä¸‹ä»–æ‰“åŒ…æ˜¯å¦åˆç†ã€‚<br>webpackå®˜ç½‘æä¾›çš„ä¸€ä¸ªåˆ†æå·¥å…·çš„ä»“åº“ï¼š<a href="https://github.com/webpack/analyseã€‚" target="_blank" rel="noopener">https://github.com/webpack/analyseã€‚</a><br>å¦‚æœè¦å¯¹æˆ‘ä»¬è‡ªä¸ªæ‰“åŒ…ç”Ÿæˆçš„ä»£ç è¿›è¡Œä¸€ä¸ªåˆ†æï¼Œé¦–å…ˆè¦ç”Ÿæˆä¸€ä¸ªæ‰“åŒ…è¿‡ç¨‹çš„æè¿°æ–‡ä»¶ï¼Œå°†â€“profile â€“json &gt; stats.jsonç²˜è´´åˆ°package.json</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">ã€€ã€€<span class="string">"dev-build"</span>: <span class="string">"webpack --profile --json &gt; stats.json --config ./build/webpack.dev.js"</span>,</span><br><span class="line">ã€€ã€€<span class="string">"bundle"</span>: <span class="string">"webpack"</span>,</span><br><span class="line">ã€€ã€€<span class="string">"watch"</span>: <span class="string">"webpack --watch"</span>,</span><br><span class="line">ã€€ã€€<span class="string">"dev"</span>: <span class="string">"webpack-dev-server --config ./build/webpack.dev.js"</span>,</span><br><span class="line">ã€€ã€€<span class="string">"build"</span>: <span class="string">"webpack --config ./build/webpack.prod.js"</span>,</span><br><span class="line">ã€€ã€€<span class="string">"server"</span>: <span class="string">"node server.js"</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p> ä»–çš„æ„æ€æ˜¯æˆ‘æŠŠæ‰“åŒ…è¿‡ç¨‹ä¸­çš„ä¸€äº›æè¿°æ”¾ç½®åˆ°stats.jsonçš„æ–‡ä»¶é‡Œé¢ã€‚è¿™ä¸ªæ–‡ä»¶çš„æ ¼å¼æ˜¯ä¸€ä¸ªjsonçš„æ ¼å¼ã€‚è¿™ä¹ˆå†™å®Œä¹‹åï¼Œæˆ‘ä»¬è¿›è¡Œä¸€æ¬¡æ‰“åŒ…ã€‚æ‰“åŒ…å®Œä¹‹ååœ¨æ ¹ç›®å½•å‡ºç°ä¸€ä¸ªå«åšstats.jsonçš„æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶å°±æ˜¯webpackè‡ªåŠ¨ç”Ÿæˆçš„å¯¹åº”çš„æˆ‘ä»¬webpackçš„æè¿°æ–‡ä»¶ã€‚ç”Ÿæˆè¿™ä¸ªæ–‡ä»¶ä¹‹åæ‰“å¼€åˆ†æä»“åº“ï¼Œè¿›å…¥<a href="http://webpack.github.io/analyse/ã€‚æŠŠæˆ‘ä»¬ç”Ÿæˆçš„stats.jsonä¼ è¿›å»ã€‚ä¼šå¾—åˆ°ä¸‹é¢çš„è¿™ç§ç»“æœ" target="_blank" rel="noopener">http://webpack.github.io/analyse/ã€‚æŠŠæˆ‘ä»¬ç”Ÿæˆçš„stats.jsonä¼ è¿›å»ã€‚ä¼šå¾—åˆ°ä¸‹é¢çš„è¿™ç§ç»“æœ</a></p>
<p><img src="/images/18-1.png" alt></p>
<p> å‘Šè¯‰æˆ‘ä»¬ï¼Œæ•´ä¸ªæ‰“åŒ…ç”¨çš„æ˜¯webpack 4.30.0çš„ç‰ˆæœ¬è¿›è¡Œçš„æ‰“åŒ…ã€‚è€—æ—¶ï¼Œ1.24sã€‚æ‰“åŒ…å¯¹åº”çš„hashå€¼æ˜¯c631e7b50a03b44511b4ã€‚é‡Œé¢æœ‰4ä¸ªæ¨¡å—ã€‚2ä¸ªchunkï¼Œä¹Ÿå°±æ˜¯2ä¸ªæ–‡ä»¶ï¼Œæ‰“åŒ…ç”Ÿæˆ3ä¸ªé™æ€æ–‡ä»¶ï¼Œæ‰“åŒ…è¿‡ç¨‹æ²¡æœ‰è­¦å‘Šï¼Œæ²¡æœ‰å¼‚å¸¸ã€‚ä¸Šé¢çš„åé¢æ˜¯æ¯ä¸ªçš„è¯¦ç»†è§£æ</p>
<p>é™¤äº†è¿™ä¸ªå·¥å…·ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–çš„åˆ†æå·¥å…·ï¼Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://webpack.js.org/guides/code-splitting/<span class="comment">#bundle-analysis</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥å®‰è£…webpack-bundle-analyzerã€‚æˆ‘ä»¬åšå¤æ‚é¡¹ç›®çš„æ—¶å€™ï¼Œä»£ç åˆ†å‰²è·Ÿæˆ‘ä»¬çš„é¢„æœŸä¸ç›¸ç¬¦ï¼Œå°±å¯ä»¥é€šè¿‡è¿™ä¸ªåšä¸€äº›ä»£ç åˆ†æã€‚çœ‹ä¸€çœ‹æ˜¯ä¸æ˜¯æœ‰äº›ä»£ç é‡å¤æ‰“åŒ…äº†ï¼Œæ˜¯ä¸æ˜¯æœ‰å“ªäº›åœ°æ–¹å¯ä»¥ä¼˜åŒ–ï¼Œå“ªä¸€éƒ¨åˆ†è€—æ—¶æ¯”è¾ƒé•¿ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">optimization: &#123;</span><br><span class="line">ã€€ã€€splitChunks: &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€chunks: <span class="string">'all'</span></span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ç°åœ¨è¿™ä¸ªchunksæ˜¯allï¼Œå¦‚æœæˆ‘ä»¬å°†æ­¤æ³¨é‡Šæ‰ï¼Œé»˜è®¤çš„å€¼æ˜¯ä»€ä¹ˆå‘¢ï¼Œæ˜¯aysncã€‚ä¹Ÿå°±æ˜¯webpacké»˜è®¤åªå¯¹å¼‚æ­¥ä»£ç è¿›è¡Œåˆ†å‰²ã€‚é‚£ä¹ˆwebpackä¸ºä»€ä¹ˆè¿™ä¹ˆåšå‘¢ã€‚åƒjqueryï¼Œlodashï¼Œè¿™ç§åº“ï¼Œåº”è¯¥å¯¹ä»–è¿›è¡Œåˆ†å‰²ã€‚è¿™æ ·æµè§ˆå™¨å¯ä»¥å¯¹ä»–ç¼“å­˜ï¼Œæé«˜è®¿é—®é€Ÿåº¦ã€‚ä½†æ˜¯æˆ‘ä»¬åªæ˜¯æé«˜ç¬¬äºŒæ¬¡è®¿é—®çš„é€Ÿåº¦ã€‚é‚£çœŸæ­£çš„å¯¹é¡µé¢åšä¼˜åŒ–ï¼Œwebpackæƒ³è¾¾åˆ°çš„æ•ˆæœæ˜¯ï¼Œå½“ä½ ç¬¬ä¸€æ¬¡è®¿é—®é¡µé¢çš„æ—¶å€™ï¼Œä»–çš„åŠ è½½é€Ÿåº¦å°±æ˜¯æœ€å¿«çš„ã€‚è¦æ»¡è¶³è¿™ç§ï¼Œé å°†jquery,lodashæ‰“åŒ…æˆå•ç‹¬çš„æ–‡ä»¶æ˜¯æ»¡è¶³ä¸äº†éœ€æ±‚çš„ã€‚é‚£ä¹ˆwebpackçœŸæ­£å¸Œæœ›æˆ‘ä»¬ç¼–å†™ä»£ç çš„æ–¹å¼æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</p>
<p>index.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// async <span class="keyword">function</span> <span class="function"><span class="title">getComponent</span></span>() &#123;</span><br><span class="line">// const &#123; default: _ &#125; = await import(/* webpackChunkName:<span class="string">"lodash"</span> */ <span class="string">'lodash'</span>);</span><br><span class="line">// var element = document.createElement(<span class="string">'div'</span>);</span><br><span class="line">// element.innerHTML = _.join([<span class="string">'1'</span>, <span class="string">' '</span>, <span class="string">'2'</span>], <span class="string">'-'</span>);</span><br><span class="line">// <span class="built_in">return</span> element;</span><br><span class="line">// &#125;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">// document.addEventListener(<span class="string">'click'</span>, ()=&gt; &#123;</span><br><span class="line">// getComponent().<span class="keyword">then</span>(element =&gt; &#123;</span><br><span class="line">// document.body.appendChild(element);</span><br><span class="line">// &#125;)</span><br><span class="line">// &#125;)</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">document.addEventListener(<span class="string">'click'</span>, ()=&gt; &#123;</span><br><span class="line">ã€€ã€€var element = document.createElement(<span class="string">'div'</span>);</span><br><span class="line">ã€€ã€€element.innerHTML = <span class="string">'1-2'</span>;</span><br><span class="line">ã€€ã€€document.body.appendChild(element);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢çš„è¿™ä¸ªæ–¹å¼æ˜¯æˆ‘ä»¬ä»¥å‰æ ‡å‡†çš„jså†™æ³•ã€‚è¿™æ®µä»£ç è‚¯å®šæ²¡æœ‰é—®é¢˜ã€‚ä½†æ˜¯è¿™ä¸ªä»£ç æ˜¯å¦å°±å®Œå…¨æ²¡æœ‰ä¼˜åŒ–çš„ç©ºé—´äº†ï¼Œæˆ–è€…è¯´è¿™æ˜¯ä¸æ˜¯webpackæ¨èçš„ä»£ç ç¼–å†™çš„æ–¹å¼ã€‚æ˜¾ç„¶ä¸æ˜¯</p>
<p>æ‰“å¼€æ§åˆ¶å°ï¼Œå¿«æ·é”® command+shift+pã€‚ è¾“å…¥coverageï¼Œæ‰“å¼€coverageï¼Œç‚¹å‡»å½•åˆ¶ï¼Œåˆ·æ–°é¡µé¢ã€‚å¯ä»¥çœ‹åˆ°main.jsçš„åˆ©ç”¨ç‡åªæœ‰75.5%ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆæ˜¯75.5ï¼…å‘¢ï¼Œçœ‹åˆ°ä¸Šé¢çš„main.jsï¼Œä¸€äº›çº¢è‰²ï¼Œä¸€äº›ç»¿è‰²ï¼Œç»¿è‰²çš„æ‰æœ‰æ„ä¹‰ï¼Œçº¢è‰²çš„æ²¡ç”¨ã€‚clické‡Œé¢çš„ä»£ç ï¼Œåªæœ‰ç‚¹å‡»åæ‰å˜ç»¿ã€‚ä¸ç„¶æ˜¯çº¢è‰²ï¼Œç‚¹å‡»å‰æ˜¯æ²¡æœ‰ç”¨çš„ä»£ç ã€‚ä¸€å¼€å§‹åŠ è½½çš„æ—¶å€™ï¼Œè¿™é‡Œé¢çš„ä»£ç å°±ä¸ä¼šæ‰§è¡Œï¼Œä¸ä¼šæ‰§è¡Œçš„ä»£ç ï¼Œä¸€å¼€å§‹å°±è®©é¡µé¢ä¸‹è½½ä¸‹æ¥ï¼Œå®é™…ä¸Šå°±ä¼šæµªè´¹æ‰§è¡Œçš„æ€§èƒ½</p>
<p>é‚£ä¹ˆwebpackå¸Œæœ›è¿™ç§äº¤äº’çš„ä»£ç åº”è¯¥æ”¾åˆ°å¼‚æ­¥åŠ è½½çš„æ¨¡å—é‡Œé¢å»å†™ï¼Œæ–°å»ºä¸€ä¸ªclick.js<br>index.html</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">ã€€ã€€&lt;head&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€&lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€&lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"ie=edge"</span>&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€&lt;title&gt;html template&lt;/title&gt;</span><br><span class="line">ã€€ã€€&lt;/head&gt;</span><br><span class="line">ã€€ã€€&lt;body&gt;</span><br><span class="line">ã€€ã€€ã€€ã€€&lt;div id=<span class="string">'root'</span>&gt;&lt;/div&gt;</span><br><span class="line">ã€€ã€€&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>index.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">document.addEventListener(<span class="string">'click'</span>, ()=&gt; &#123;</span><br><span class="line">ã€€ã€€import(<span class="string">'./click.js'</span>).<span class="keyword">then</span>((&#123;default: func&#125;) =&gt; &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€func()</span><br><span class="line">ã€€ã€€&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>click.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">handleClick</span></span>()&#123;</span><br><span class="line">ã€€ã€€var element = document.createElement(<span class="string">'div'</span>);</span><br><span class="line">ã€€ã€€element.innerHTML = <span class="string">'1-2'</span>;</span><br><span class="line">ã€€ã€€document.body.appendChild(element);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> default handleClick;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ—¶å€™æ‰“åŒ…åè¿è¡Œindex.htmlï¼Œå‘ç°main.jsçš„åˆ©ç”¨ç‡å˜æˆäº†78ï¼…ï¼Œå› ä¸ºåŠ è½½é¡µé¢çš„æ—¶å€™å¹¶æ²¡æœ‰åŠ è½½ä¸šåŠ¡ã€‚æ‰€ä»¥webpackå¸Œæœ›å¤šå†™å¼‚æ­¥çš„ä»£ç ï¼Œæ‰€ä»¥é»˜è®¤çš„chunksé»˜è®¤é…ç½®çš„æ˜¯asyncã€‚å¼‚æ­¥çš„ã€‚</p>
<p>æ¯”å¦‚ç”¨æˆ·æœªç™»å½•çš„æƒ…å†µä¸‹ï¼Œé¦–å…ˆæˆ‘åªåŠ è½½é¦–é¡µçš„é€»è¾‘ï¼Œä¸åŠ è½½ç™»å½•çš„é€»è¾‘ï¼Œé‚£ä¹ˆç­‰æˆ‘ç‚¹å‡»ç™»å½•çš„æ—¶å€™å†å»è®°è½½ç™»å½•ï¼Œä¼šä¸ä¼šå¾ˆæ…¢å‘¢ï¼Œé‚£ä¹ˆpreloading,prefetchingå°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚åœ¨é¦–é¡µåŠ è½½å¥½ä¹‹åï¼Œç©ºé—²çš„æ—¶é—´å·å·çš„å»æŠŠç™»å½•çš„æ¨¡å—åŠ è½½å¥½ã€‚å¦‚æœåˆ©ç”¨è¿™ä¸ªç©ºé—²çš„æ—¶é—´ï¼Œä¸¤ä¸ªæ¡ä»¶éƒ½æ»¡è¶³äº†ã€‚é‚£ä¹ˆæ€ä¹ˆåšå‘¢</p>
<p>å°† /* webpackPrefetch: true */ è¿™å¥è¯æ”¾åˆ°å¼•å…¥çš„å‰é¢<br>index.js </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">document.addEventListener(<span class="string">'click'</span>, ()=&gt; &#123;</span><br><span class="line">ã€€ã€€import(/* webpackPrefetch: <span class="literal">true</span> */<span class="string">'./click.js'</span>).<span class="keyword">then</span>((&#123;default: func&#125;) =&gt; &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€func()</span><br><span class="line">ã€€ã€€&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>æ„æ€æ˜¯çš„å½“æˆ‘ç‚¹å‡»çš„æ—¶å€™ï¼Œå»åŠ è½½click.jsï¼Œä½†ä¸æ˜¯éå¾—ç‚¹å‡»çš„æ—¶å€™æ‰å»åŠ è½½ï¼Œè€Œæ˜¯ä¸»è¦çš„jsåŠ è½½å¥½ä¹‹åï¼Œæœ‰ç©ºé—²çš„æ—¶å€™ï¼Œä¼šå·å·çš„å»å®¶åœ¨click.jsã€‚ä¸Šé¢çš„è¿™ç§é­”æ³•æ³¨é‡Šæ˜¯prefetchçš„ç”¨æ³• </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://webpack.js.org/guides/code-splitting<span class="comment">#prefetchingpreloading-modules</span></span><br></pre></td></tr></table></figure>

<p>preloading,prefetchingçš„åŒºåˆ«ã€‚prefetchingä¼šç­‰ä¸»è¦çš„jsåŠ è½½å®Œä¹‹åï¼Œç©ºé—²çš„æ—¶å€™å†å»åŠ è½½click.js<br>/* webpackPreload: true */ã€‚preloadæ˜¯å’Œä¸»è¦çš„æ–‡ä»¶ä¸€èµ·å»åŠ è½½çš„ï¼Œæ‰€ä»¥preloadè¿˜æ˜¯ä¸æ€ä¹ˆåˆç†çš„ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">qicainiao</p>
              <p class="site-description motion-element" itemprop="description">Geek Spirit</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">29</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">qicainiao</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
